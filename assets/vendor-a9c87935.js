var R=Object.defineProperty;var F=(I,o,i)=>o in I?R(I,o,{enumerable:!0,configurable:!0,writable:!0,value:i}):I[o]=i;var N=(I,o,i)=>(F(I,typeof o!="symbol"?o+"":o,i),i);var z=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function q(I){return I&&I.__esModule&&Object.prototype.hasOwnProperty.call(I,"default")?I.default:I}var M={};(function(I){Object.defineProperty(I,"__esModule",{value:!0}),I.default=void 0;function o(c){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},o(c)}function i(c,r){var t=typeof Symbol<"u"&&c[Symbol.iterator]||c["@@iterator"];if(!t){if(Array.isArray(c)||(t=u(c))||r&&c&&typeof c.length=="number"){t&&(c=t);var e=0,s=function(){};return{s,n:function(){return e>=c.length?{done:!0}:{done:!1,value:c[e++]}},e:function(h){throw h},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,l=!1,f;return{s:function(){t=t.call(c)},n:function(){var h=t.next();return a=h.done,h},e:function(h){l=!0,f=h},f:function(){try{!a&&t.return!=null&&t.return()}finally{if(l)throw f}}}}function n(c){return C(c)||p(c)||u(c)||m()}function m(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u(c,r){if(c){if(typeof c=="string")return g(c,r);var t=Object.prototype.toString.call(c).slice(8,-1);if(t==="Object"&&c.constructor&&(t=c.constructor.name),t==="Map"||t==="Set")return Array.from(c);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return g(c,r)}}function p(c){if(typeof Symbol<"u"&&c[Symbol.iterator]!=null||c["@@iterator"]!=null)return Array.from(c)}function C(c){if(Array.isArray(c))return g(c)}function g(c,r){(r==null||r>c.length)&&(r=c.length);for(var t=0,e=new Array(r);t<r;t++)e[t]=c[t];return e}function w(c,r){if(!(c instanceof r))throw new TypeError("Cannot call a class as a function")}function x(c,r){for(var t=0;t<r.length;t++){var e=r[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(c,e.key,e)}}function T(c,r,t){return r&&x(c.prototype,r),t&&x(c,t),Object.defineProperty(c,"prototype",{writable:!1}),c}function v(c,r,t){return r in c?Object.defineProperty(c,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):c[r]=t,c}var A=function(){function c(r,t){var e=this;if(w(this,c),v(this,"defaultOptions",{sourceAttr:"href",overlay:!0,overlayOpacity:.7,spinner:!0,nav:!0,navText:["&lsaquo;","&rsaquo;"],captions:!0,captionDelay:0,captionSelector:"img",captionType:"attr",captionsData:"title",captionPosition:"bottom",captionClass:"",captionHTML:!0,close:!0,closeText:"&times;",swipeClose:!0,showCounter:!0,fileExt:"png|jpg|jpeg|gif|webp",animationSlide:!0,animationSpeed:250,preloading:!0,enableKeyboard:!0,loop:!0,rel:!1,docClose:!0,swipeTolerance:50,className:"simple-lightbox",widthRatio:.8,heightRatio:.9,scaleImageToRatio:!1,disableRightClick:!1,disableScroll:!0,alertError:!0,alertErrorMessage:"Image not found, next image will be loaded",additionalHtml:!1,history:!0,throttleInterval:0,doubleTapZoom:2,maxZoom:10,htmlClass:"has-lightbox",rtl:!1,fixedClass:"sl-fixed",fadeSpeed:300,uniqueImages:!0,focus:!0,scrollZoom:!0,scrollZoomFactor:.5,download:!1}),v(this,"transitionPrefix",void 0),v(this,"isPassiveEventsSupported",void 0),v(this,"transitionCapable",!1),v(this,"isTouchDevice","ontouchstart"in window),v(this,"isAppleDevice",/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),v(this,"initialLocationHash",void 0),v(this,"pushStateSupport","pushState"in history),v(this,"isOpen",!1),v(this,"isAnimating",!1),v(this,"isClosing",!1),v(this,"isFadeIn",!1),v(this,"urlChangedOnce",!1),v(this,"hashReseted",!1),v(this,"historyHasChanges",!1),v(this,"historyUpdateTimeout",null),v(this,"currentImage",void 0),v(this,"eventNamespace","simplelightbox"),v(this,"domNodes",{}),v(this,"loadedImages",[]),v(this,"initialImageIndex",0),v(this,"currentImageIndex",0),v(this,"initialSelector",null),v(this,"globalScrollbarWidth",0),v(this,"controlCoordinates",{swipeDiff:0,swipeYDiff:0,swipeStart:0,swipeEnd:0,swipeYStart:0,swipeYEnd:0,mousedown:!1,imageLeft:0,zoomed:!1,containerHeight:0,containerWidth:0,containerOffsetX:0,containerOffsetY:0,imgHeight:0,imgWidth:0,capture:!1,initialOffsetX:0,initialOffsetY:0,initialPointerOffsetX:0,initialPointerOffsetY:0,initialPointerOffsetX2:0,initialPointerOffsetY2:0,initialScale:1,initialPinchDistance:0,pointerOffsetX:0,pointerOffsetY:0,pointerOffsetX2:0,pointerOffsetY2:0,targetOffsetX:0,targetOffsetY:0,targetScale:0,pinchOffsetX:0,pinchOffsetY:0,limitOffsetX:0,limitOffsetY:0,scaleDifference:0,targetPinchDistance:0,touchCount:0,doubleTapped:!1,touchmoveCount:0}),this.options=Object.assign(this.defaultOptions,t),this.isPassiveEventsSupported=this.checkPassiveEventsSupport(),typeof r=="string"?(this.initialSelector=r,this.elements=Array.from(document.querySelectorAll(r))):this.elements=typeof r.length<"u"&&r.length>0?Array.from(r):[r],this.relatedElements=[],this.transitionPrefix=this.calculateTransitionPrefix(),this.transitionCapable=this.transitionPrefix!==!1,this.initialLocationHash=this.hash,this.options.rel&&(this.elements=this.getRelated(this.options.rel)),this.options.uniqueImages){var s=[];this.elements=Array.from(this.elements).filter(function(a){var l=a.getAttribute(e.options.sourceAttr);return s.indexOf(l)===-1?(s.push(l),!0):!1})}this.createDomNodes(),this.options.close&&this.domNodes.wrapper.appendChild(this.domNodes.closeButton),this.options.nav&&this.domNodes.wrapper.appendChild(this.domNodes.navigation),this.options.spinner&&this.domNodes.wrapper.appendChild(this.domNodes.spinner),this.addEventListener(this.elements,"click."+this.eventNamespace,function(a){if(e.isValidLink(a.currentTarget)){if(a.preventDefault(),e.isAnimating)return!1;e.initialImageIndex=e.elements.indexOf(a.currentTarget),e.openImage(a.currentTarget)}}),this.options.docClose&&this.addEventListener(this.domNodes.wrapper,["click."+this.eventNamespace,"touchstart."+this.eventNamespace],function(a){e.isOpen&&a.target===a.currentTarget&&e.close()}),this.options.disableRightClick&&this.addEventListener(document.body,"contextmenu."+this.eventNamespace,function(a){a.target.parentElement.classList.contains("sl-image")&&a.preventDefault()}),this.options.enableKeyboard&&this.addEventListener(document.body,"keyup."+this.eventNamespace,this.throttle(function(a){if(e.controlCoordinates.swipeDiff=0,e.isAnimating&&a.key==="Escape"){e.currentImage.setAttribute("src",""),e.isAnimating=!1,e.close();return}e.isOpen&&(a.preventDefault(),a.key==="Escape"&&e.close(),!e.isAnimating&&["ArrowLeft","ArrowRight"].indexOf(a.key)>-1&&e.loadImage(a.key==="ArrowRight"?1:-1))},this.options.throttleInterval)),this.addEvents()}return T(c,[{key:"checkPassiveEventsSupport",value:function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassive",null,e),window.removeEventListener("testPassive",null,e)}catch{}return t}},{key:"getCaptionElement",value:function(t){if(this.options.captionSelector.startsWith("+")){var e=this.options.captionSelector.replace(/^\+/,"").trimStart(),s=t.nextElementSibling;return s&&s.matches(e)?s:!1}else if(this.options.captionSelector.startsWith(">")){var a=this.options.captionSelector.replace(/^>/,"").trimStart();return t.querySelector(a)}else return t.querySelector(this.options.captionSelector)}},{key:"generateQuerySelector",value:function(t){var e=t.tagName,s=t.id,a=t.className,l=t.parentNode;if(e==="HTML")return"HTML";var f=e;if(f+=s!==""?"#".concat(s):"",a)for(var d=a.trim().split(/\s/),h=0;h<d.length;h++)f+=".".concat(d[h]);for(var y=1,O=t;O.previousElementSibling;O=O.previousElementSibling)y+=1;return f+=":nth-child(".concat(y,")"),"".concat(this.generateQuerySelector(l)," > ").concat(f)}},{key:"createDomNodes",value:function(){if(this.domNodes.overlay=document.createElement("div"),this.domNodes.overlay.classList.add("sl-overlay"),this.domNodes.overlay.dataset.opacityTarget=this.options.overlayOpacity,this.domNodes.closeButton=document.createElement("button"),this.domNodes.closeButton.classList.add("sl-close"),this.domNodes.closeButton.innerHTML=this.options.closeText,this.domNodes.spinner=document.createElement("div"),this.domNodes.spinner.classList.add("sl-spinner"),this.domNodes.spinner.innerHTML="<div></div>",this.domNodes.navigation=document.createElement("div"),this.domNodes.navigation.classList.add("sl-navigation"),this.domNodes.navigation.innerHTML='<button class="sl-prev">'.concat(this.options.navText[0],'</button><button class="sl-next">').concat(this.options.navText[1],"</button>"),this.domNodes.counter=document.createElement("div"),this.domNodes.counter.classList.add("sl-counter"),this.domNodes.counter.innerHTML='<span class="sl-current"></span>/<span class="sl-total"></span>',this.domNodes.download=document.createElement("div"),this.domNodes.download.classList.add("sl-download"),this.domNodes.downloadLink=document.createElement("a"),this.domNodes.downloadLink.setAttribute("download",""),this.domNodes.downloadLink.textContent=this.options.download,this.domNodes.download.appendChild(this.domNodes.downloadLink),this.domNodes.caption=document.createElement("div"),this.domNodes.caption.classList.add("sl-caption","pos-"+this.options.captionPosition),this.options.captionClass){var t,e=this.options.captionClass.split(/[\s,]+/);(t=this.domNodes.caption.classList).add.apply(t,n(e))}this.domNodes.image=document.createElement("div"),this.domNodes.image.classList.add("sl-image"),this.domNodes.wrapper=document.createElement("div"),this.domNodes.wrapper.classList.add("sl-wrapper"),this.domNodes.wrapper.setAttribute("tabindex",-1),this.domNodes.wrapper.setAttribute("role","dialog"),this.domNodes.wrapper.setAttribute("aria-hidden",!1),this.options.className&&this.domNodes.wrapper.classList.add(this.options.className),this.options.rtl&&this.domNodes.wrapper.classList.add("sl-dir-rtl")}},{key:"throttle",value:function(t,e){var s;return function(){s||(t.apply(this,arguments),s=!0,setTimeout(function(){return s=!1},e))}}},{key:"isValidLink",value:function(t){return!this.options.fileExt||t.getAttribute(this.options.sourceAttr)&&new RegExp("("+this.options.fileExt+")($|\\?.*$)","i").test(t.getAttribute(this.options.sourceAttr))}},{key:"calculateTransitionPrefix",value:function(){var t=(document.body||document.documentElement).style;return"transition"in t?"":"WebkitTransition"in t?"-webkit-":"MozTransition"in t?"-moz-":"OTransition"in t?"-o":!1}},{key:"getScrollbarWidth",value:function(){var t=0,e=document.createElement("div");return e.classList.add("sl-scrollbar-measure"),document.body.appendChild(e),t=e.offsetWidth-e.clientWidth,document.body.removeChild(e),t}},{key:"toggleScrollbar",value:function(t){var e=0,s=[].slice.call(document.querySelectorAll("."+this.options.fixedClass));if(t==="hide"){var a=window.innerWidth;if(!a){var l=document.documentElement.getBoundingClientRect();a=l.right-Math.abs(l.left)}if(document.body.clientWidth<a||this.isAppleDevice){var f=parseInt(window.getComputedStyle(document.body).paddingRight||0,10);e=this.getScrollbarWidth(),document.body.dataset.originalPaddingRight=f,(e>0||e==0&&this.isAppleDevice)&&(document.body.classList.add("hidden-scroll"),document.body.style.paddingRight=f+e+"px",s.forEach(function(d){var h=d.style.paddingRight,y=window.getComputedStyle(d)["padding-right"];d.dataset.originalPaddingRight=h,d.style.paddingRight="".concat(parseFloat(y)+e,"px")}))}}else document.body.classList.remove("hidden-scroll"),document.body.style.paddingRight=document.body.dataset.originalPaddingRight+"px",s.forEach(function(d){var h=d.dataset.originalPaddingRight;typeof h<"u"&&(d.style.paddingRight=h)});return e}},{key:"close",value:function(){var t=this;if(!this.isOpen||this.isAnimating||this.isClosing)return!1;this.isClosing=!0;var e=this.relatedElements[this.currentImageIndex];e.dispatchEvent(new Event("close.simplelightbox")),this.options.history&&(this.historyHasChanges=!1,this.hashReseted||this.resetHash()),this.removeEventListener(document,"focusin."+this.eventNamespace),this.fadeOut(this.domNodes.overlay,this.options.fadeSpeed),this.fadeOut(document.querySelectorAll(".sl-image img,  .sl-close, .sl-navigation, .sl-image .sl-caption, .sl-counter"),this.options.fadeSpeed,function(){t.options.disableScroll&&t.toggleScrollbar("show"),t.options.htmlClass&&t.options.htmlClass!==""&&document.querySelector("html").classList.remove(t.options.htmlClass),document.body.removeChild(t.domNodes.wrapper),t.options.overlay&&document.body.removeChild(t.domNodes.overlay),t.domNodes.additionalHtml=null,t.domNodes.download=null,e.dispatchEvent(new Event("closed.simplelightbox")),t.isClosing=!1}),this.currentImage=null,this.isOpen=!1,this.isAnimating=!1;for(var s in this.controlCoordinates)this.controlCoordinates[s]=0;this.controlCoordinates.mousedown=!1,this.controlCoordinates.zoomed=!1,this.controlCoordinates.capture=!1,this.controlCoordinates.initialScale=this.minMax(1,1,this.options.maxZoom),this.controlCoordinates.doubleTapped=!1}},{key:"hash",get:function(){return window.location.hash.substring(1)}},{key:"preload",value:function(){var t=this,e=this.currentImageIndex,s=this.relatedElements.length,a=e+1<0?s-1:e+1>=s-1?0:e+1,l=e-1<0?s-1:e-1>=s-1?0:e-1,f=new Image,d=new Image;f.addEventListener("load",function(h){var y=h.target.getAttribute("src");t.loadedImages.indexOf(y)===-1&&t.loadedImages.push(y),t.relatedElements[e].dispatchEvent(new Event("nextImageLoaded."+t.eventNamespace))}),f.setAttribute("src",this.relatedElements[a].getAttribute(this.options.sourceAttr)),d.addEventListener("load",function(h){var y=h.target.getAttribute("src");t.loadedImages.indexOf(y)===-1&&t.loadedImages.push(y),t.relatedElements[e].dispatchEvent(new Event("prevImageLoaded."+t.eventNamespace))}),d.setAttribute("src",this.relatedElements[l].getAttribute(this.options.sourceAttr))}},{key:"loadImage",value:function(t){var e=this,s=t;this.options.rtl&&(t=-t),this.relatedElements[this.currentImageIndex].dispatchEvent(new Event("change."+this.eventNamespace)),this.relatedElements[this.currentImageIndex].dispatchEvent(new Event((t===1?"next":"prev")+"."+this.eventNamespace));var a=this.currentImageIndex+t;if(this.isAnimating||(a<0||a>=this.relatedElements.length)&&this.options.loop===!1)return!1;this.currentImageIndex=a<0?this.relatedElements.length-1:a>this.relatedElements.length-1?0:a,this.domNodes.counter.querySelector(".sl-current").innerHTML=this.currentImageIndex+1,this.options.animationSlide&&this.slide(this.options.animationSpeed/1e3,-100*s-this.controlCoordinates.swipeDiff+"px"),this.fadeOut(this.domNodes.image,this.options.fadeSpeed,function(){e.isAnimating=!0,e.isClosing?e.isAnimating=!1:setTimeout(function(){var l=e.relatedElements[e.currentImageIndex];e.currentImage&&(e.currentImage.setAttribute("src",l.getAttribute(e.options.sourceAttr)),e.loadedImages.indexOf(l.getAttribute(e.options.sourceAttr))===-1&&e.show(e.domNodes.spinner),e.domNodes.image.contains(e.domNodes.caption)&&e.domNodes.image.removeChild(e.domNodes.caption),e.adjustImage(s),e.options.preloading&&e.preload())},100)})}},{key:"adjustImage",value:function(t){var e=this;if(!this.currentImage)return!1;var s=new Image,a=window.innerWidth*this.options.widthRatio,l=window.innerHeight*this.options.heightRatio;s.setAttribute("src",this.currentImage.getAttribute("src")),this.currentImage.dataset.scale=1,this.currentImage.dataset.translateX=0,this.currentImage.dataset.translateY=0,this.zoomPanElement(0,0,1),s.addEventListener("error",function(f){e.relatedElements[e.currentImageIndex].dispatchEvent(new Event("error."+e.eventNamespace)),e.isAnimating=!1,e.isOpen=!0,e.domNodes.spinner.style.display="none";var d=t===1||t===-1;if(e.initialImageIndex===e.currentImageIndex&&d)return e.close();e.options.alertError&&alert(e.options.alertErrorMessage),e.loadImage(d?t:1)}),s.addEventListener("load",function(f){typeof t<"u"&&(e.relatedElements[e.currentImageIndex].dispatchEvent(new Event("changed."+e.eventNamespace)),e.relatedElements[e.currentImageIndex].dispatchEvent(new Event((t===1?"nextDone":"prevDone")+"."+e.eventNamespace))),e.options.history&&e.updateURL(),e.loadedImages.indexOf(e.currentImage.getAttribute("src"))===-1&&e.loadedImages.push(e.currentImage.getAttribute("src"));var d=f.target.width,h=f.target.height;if(e.options.scaleImageToRatio||d>a||h>l){var y=d/h>a/l?d/a:h/l;d/=y,h/=y}e.domNodes.image.style.top=(window.innerHeight-h)/2+"px",e.domNodes.image.style.left=(window.innerWidth-d-e.globalScrollbarWidth)/2+"px",e.domNodes.image.style.width=d+"px",e.domNodes.image.style.height=h+"px",e.domNodes.spinner.style.display="none",e.options.focus&&e.forceFocus(),e.fadeIn(e.currentImage,e.options.fadeSpeed,function(){e.options.focus&&e.domNodes.wrapper.focus()}),e.isOpen=!0;var O,S;typeof e.options.captionSelector=="string"?O=e.options.captionSelector==="self"?e.relatedElements[e.currentImageIndex]:e.getCaptionElement(e.relatedElements[e.currentImageIndex]):typeof e.options.captionSelector=="function"&&(O=e.options.captionSelector(e.relatedElements[e.currentImageIndex])),e.options.captions&&O&&(e.options.captionType==="data"?S=O.dataset[e.options.captionsData]:e.options.captionType==="text"?S=O.innerHTML:S=O.getAttribute(e.options.captionsData)),e.options.loop?e.relatedElements.length===1?e.hide(e.domNodes.navigation.querySelectorAll(".sl-prev, .sl-next")):e.show(e.domNodes.navigation.querySelectorAll(".sl-prev, .sl-next")):(e.currentImageIndex===0&&e.hide(e.domNodes.navigation.querySelector(".sl-prev")),e.currentImageIndex>=e.relatedElements.length-1&&e.hide(e.domNodes.navigation.querySelector(".sl-next")),e.currentImageIndex>0&&e.show(e.domNodes.navigation.querySelector(".sl-prev")),e.currentImageIndex<e.relatedElements.length-1&&e.show(e.domNodes.navigation.querySelector(".sl-next"))),t===1||t===-1?(e.options.animationSlide&&(e.slide(0,100*t+"px"),setTimeout(function(){e.slide(e.options.animationSpeed/1e3,0+"px")},50)),e.fadeIn(e.domNodes.image,e.options.fadeSpeed,function(){e.isAnimating=!1,e.setCaption(S,d)})):(e.isAnimating=!1,e.setCaption(S,d)),e.options.additionalHtml&&!e.domNodes.additionalHtml&&(e.domNodes.additionalHtml=document.createElement("div"),e.domNodes.additionalHtml.classList.add("sl-additional-html"),e.domNodes.additionalHtml.innerHTML=e.options.additionalHtml,e.domNodes.image.appendChild(e.domNodes.additionalHtml)),e.options.download&&e.domNodes.downloadLink.setAttribute("href",e.currentImage.getAttribute("src"))})}},{key:"zoomPanElement",value:function(t,e,s){this.currentImage.style[this.transitionPrefix+"transform"]="translate("+t+","+e+") scale("+s+")"}},{key:"minMax",value:function(t,e,s){return t<e?e:t>s?s:t}},{key:"setZoomData",value:function(t,e,s){this.currentImage.dataset.scale=t,this.currentImage.dataset.translateX=e,this.currentImage.dataset.translateY=s}},{key:"hashchangeHandler",value:function(){this.isOpen&&this.hash===this.initialLocationHash&&(this.hashReseted=!0,this.close())}},{key:"addEvents",value:function(){var t=this;if(this.addEventListener(window,"resize."+this.eventNamespace,function(s){t.isOpen&&t.adjustImage()}),this.addEventListener(this.domNodes.closeButton,["click."+this.eventNamespace,"touchstart."+this.eventNamespace],this.close.bind(this)),this.options.history&&setTimeout(function(){t.addEventListener(window,"hashchange."+t.eventNamespace,function(s){t.isOpen&&t.hashchangeHandler()})},40),this.addEventListener(this.domNodes.navigation.getElementsByTagName("button"),"click."+this.eventNamespace,function(s){if(!s.currentTarget.tagName.match(/button/i))return!0;s.preventDefault(),t.controlCoordinates.swipeDiff=0,t.loadImage(s.currentTarget.classList.contains("sl-next")?1:-1)}),this.options.scrollZoom){var e=1;this.addEventListener(this.domNodes.image,["mousewheel","DOMMouseScroll"],function(s){if(t.controlCoordinates.mousedown||t.isAnimating||t.isClosing||!t.isOpen)return!0;t.controlCoordinates.containerHeight==0&&(t.controlCoordinates.containerHeight=t.getDimensions(t.domNodes.image).height,t.controlCoordinates.containerWidth=t.getDimensions(t.domNodes.image).width,t.controlCoordinates.imgHeight=t.getDimensions(t.currentImage).height,t.controlCoordinates.imgWidth=t.getDimensions(t.currentImage).width,t.controlCoordinates.containerOffsetX=t.domNodes.image.offsetLeft,t.controlCoordinates.containerOffsetY=t.domNodes.image.offsetTop,t.controlCoordinates.initialOffsetX=parseFloat(t.currentImage.dataset.translateX),t.controlCoordinates.initialOffsetY=parseFloat(t.currentImage.dataset.translateY));var a=s.delta||s.wheelDelta;a===void 0&&(a=s.detail),a=Math.max(-1,Math.min(1,a)),e+=a*t.options.scrollZoomFactor*e,e=Math.max(1,Math.min(t.options.maxZoom,e)),t.controlCoordinates.targetScale=e;var l=document.documentElement.scrollTop||document.body.scrollTop;t.controlCoordinates.pinchOffsetX=s.pageX,t.controlCoordinates.pinchOffsetY=s.pageY-l||0,t.controlCoordinates.limitOffsetX=(t.controlCoordinates.imgWidth*t.controlCoordinates.targetScale-t.controlCoordinates.containerWidth)/2,t.controlCoordinates.limitOffsetY=(t.controlCoordinates.imgHeight*t.controlCoordinates.targetScale-t.controlCoordinates.containerHeight)/2,t.controlCoordinates.scaleDifference=t.controlCoordinates.targetScale-t.controlCoordinates.initialScale,t.controlCoordinates.targetOffsetX=t.controlCoordinates.imgWidth*t.controlCoordinates.targetScale<=t.controlCoordinates.containerWidth?0:t.minMax(t.controlCoordinates.initialOffsetX-(t.controlCoordinates.pinchOffsetX-t.controlCoordinates.containerOffsetX-t.controlCoordinates.containerWidth/2-t.controlCoordinates.initialOffsetX)/(t.controlCoordinates.targetScale-t.controlCoordinates.scaleDifference)*t.controlCoordinates.scaleDifference,t.controlCoordinates.limitOffsetX*-1,t.controlCoordinates.limitOffsetX),t.controlCoordinates.targetOffsetY=t.controlCoordinates.imgHeight*t.controlCoordinates.targetScale<=t.controlCoordinates.containerHeight?0:t.minMax(t.controlCoordinates.initialOffsetY-(t.controlCoordinates.pinchOffsetY-t.controlCoordinates.containerOffsetY-t.controlCoordinates.containerHeight/2-t.controlCoordinates.initialOffsetY)/(t.controlCoordinates.targetScale-t.controlCoordinates.scaleDifference)*t.controlCoordinates.scaleDifference,t.controlCoordinates.limitOffsetY*-1,t.controlCoordinates.limitOffsetY),t.zoomPanElement(t.controlCoordinates.targetOffsetX+"px",t.controlCoordinates.targetOffsetY+"px",t.controlCoordinates.targetScale),t.controlCoordinates.targetScale>1?(t.controlCoordinates.zoomed=!0,(!t.domNodes.caption.style.opacity||t.domNodes.caption.style.opacity>0)&&t.domNodes.caption.style.display!=="none"&&t.fadeOut(t.domNodes.caption,t.options.fadeSpeed)):(t.controlCoordinates.initialScale===1&&(t.controlCoordinates.zoomed=!1,t.domNodes.caption.style.display==="none"&&t.fadeIn(t.domNodes.caption,t.options.fadeSpeed)),t.controlCoordinates.initialPinchDistance=null,t.controlCoordinates.capture=!1),t.controlCoordinates.initialPinchDistance=t.controlCoordinates.targetPinchDistance,t.controlCoordinates.initialScale=t.controlCoordinates.targetScale,t.controlCoordinates.initialOffsetX=t.controlCoordinates.targetOffsetX,t.controlCoordinates.initialOffsetY=t.controlCoordinates.targetOffsetY,t.setZoomData(t.controlCoordinates.targetScale,t.controlCoordinates.targetOffsetX,t.controlCoordinates.targetOffsetY),t.zoomPanElement(t.controlCoordinates.targetOffsetX+"px",t.controlCoordinates.targetOffsetY+"px",t.controlCoordinates.targetScale)})}this.addEventListener(this.domNodes.image,["touchstart."+this.eventNamespace,"mousedown."+this.eventNamespace],function(s){if(s.target.tagName==="A"&&s.type==="touchstart")return!0;if(s.type==="mousedown")s.preventDefault(),t.controlCoordinates.initialPointerOffsetX=s.clientX,t.controlCoordinates.initialPointerOffsetY=s.clientY,t.controlCoordinates.containerHeight=t.getDimensions(t.domNodes.image).height,t.controlCoordinates.containerWidth=t.getDimensions(t.domNodes.image).width,t.controlCoordinates.imgHeight=t.getDimensions(t.currentImage).height,t.controlCoordinates.imgWidth=t.getDimensions(t.currentImage).width,t.controlCoordinates.containerOffsetX=t.domNodes.image.offsetLeft,t.controlCoordinates.containerOffsetY=t.domNodes.image.offsetTop,t.controlCoordinates.initialOffsetX=parseFloat(t.currentImage.dataset.translateX),t.controlCoordinates.initialOffsetY=parseFloat(t.currentImage.dataset.translateY),t.controlCoordinates.capture=!0;else{if(t.controlCoordinates.touchCount=s.touches.length,t.controlCoordinates.initialPointerOffsetX=s.touches[0].clientX,t.controlCoordinates.initialPointerOffsetY=s.touches[0].clientY,t.controlCoordinates.containerHeight=t.getDimensions(t.domNodes.image).height,t.controlCoordinates.containerWidth=t.getDimensions(t.domNodes.image).width,t.controlCoordinates.imgHeight=t.getDimensions(t.currentImage).height,t.controlCoordinates.imgWidth=t.getDimensions(t.currentImage).width,t.controlCoordinates.containerOffsetX=t.domNodes.image.offsetLeft,t.controlCoordinates.containerOffsetY=t.domNodes.image.offsetTop,t.controlCoordinates.touchCount===1){if(!t.controlCoordinates.doubleTapped)t.controlCoordinates.doubleTapped=!0,setTimeout(function(){t.controlCoordinates.doubleTapped=!1},300);else return t.currentImage.classList.add("sl-transition"),t.controlCoordinates.zoomed?(t.controlCoordinates.initialScale=1,t.setZoomData(t.controlCoordinates.initialScale,0,0),t.zoomPanElement(0+"px",0+"px",t.controlCoordinates.initialScale),t.controlCoordinates.zoomed=!1):(t.controlCoordinates.initialScale=t.options.doubleTapZoom,t.setZoomData(t.controlCoordinates.initialScale,0,0),t.zoomPanElement(0+"px",0+"px",t.controlCoordinates.initialScale),(!t.domNodes.caption.style.opacity||t.domNodes.caption.style.opacity>0)&&t.domNodes.caption.style.display!=="none"&&t.fadeOut(t.domNodes.caption,t.options.fadeSpeed),t.controlCoordinates.zoomed=!0),setTimeout(function(){t.currentImage&&t.currentImage.classList.remove("sl-transition")},200),!1;t.controlCoordinates.initialOffsetX=parseFloat(t.currentImage.dataset.translateX),t.controlCoordinates.initialOffsetY=parseFloat(t.currentImage.dataset.translateY)}else t.controlCoordinates.touchCount===2&&(t.controlCoordinates.initialPointerOffsetX2=s.touches[1].clientX,t.controlCoordinates.initialPointerOffsetY2=s.touches[1].clientY,t.controlCoordinates.initialOffsetX=parseFloat(t.currentImage.dataset.translateX),t.controlCoordinates.initialOffsetY=parseFloat(t.currentImage.dataset.translateY),t.controlCoordinates.pinchOffsetX=(t.controlCoordinates.initialPointerOffsetX+t.controlCoordinates.initialPointerOffsetX2)/2,t.controlCoordinates.pinchOffsetY=(t.controlCoordinates.initialPointerOffsetY+t.controlCoordinates.initialPointerOffsetY2)/2,t.controlCoordinates.initialPinchDistance=Math.sqrt((t.controlCoordinates.initialPointerOffsetX-t.controlCoordinates.initialPointerOffsetX2)*(t.controlCoordinates.initialPointerOffsetX-t.controlCoordinates.initialPointerOffsetX2)+(t.controlCoordinates.initialPointerOffsetY-t.controlCoordinates.initialPointerOffsetY2)*(t.controlCoordinates.initialPointerOffsetY-t.controlCoordinates.initialPointerOffsetY2)));t.controlCoordinates.capture=!0}return t.controlCoordinates.mousedown?!0:(t.transitionCapable&&(t.controlCoordinates.imageLeft=parseInt(t.domNodes.image.style.left,10)),t.controlCoordinates.mousedown=!0,t.controlCoordinates.swipeDiff=0,t.controlCoordinates.swipeYDiff=0,t.controlCoordinates.swipeStart=s.pageX||s.touches[0].pageX,t.controlCoordinates.swipeYStart=s.pageY||s.touches[0].pageY,!1)}),this.addEventListener(this.domNodes.image,["touchmove."+this.eventNamespace,"mousemove."+this.eventNamespace,"MSPointerMove"],function(s){if(!t.controlCoordinates.mousedown)return!0;if(s.type==="touchmove"){if(t.controlCoordinates.capture===!1)return!1;t.controlCoordinates.pointerOffsetX=s.touches[0].clientX,t.controlCoordinates.pointerOffsetY=s.touches[0].clientY,t.controlCoordinates.touchCount=s.touches.length,t.controlCoordinates.touchmoveCount++,t.controlCoordinates.touchCount>1?(t.controlCoordinates.pointerOffsetX2=s.touches[1].clientX,t.controlCoordinates.pointerOffsetY2=s.touches[1].clientY,t.controlCoordinates.targetPinchDistance=Math.sqrt((t.controlCoordinates.pointerOffsetX-t.controlCoordinates.pointerOffsetX2)*(t.controlCoordinates.pointerOffsetX-t.controlCoordinates.pointerOffsetX2)+(t.controlCoordinates.pointerOffsetY-t.controlCoordinates.pointerOffsetY2)*(t.controlCoordinates.pointerOffsetY-t.controlCoordinates.pointerOffsetY2)),t.controlCoordinates.initialPinchDistance===null&&(t.controlCoordinates.initialPinchDistance=t.controlCoordinates.targetPinchDistance),Math.abs(t.controlCoordinates.initialPinchDistance-t.controlCoordinates.targetPinchDistance)>=1&&(t.controlCoordinates.targetScale=t.minMax(t.controlCoordinates.targetPinchDistance/t.controlCoordinates.initialPinchDistance*t.controlCoordinates.initialScale,1,t.options.maxZoom),t.controlCoordinates.limitOffsetX=(t.controlCoordinates.imgWidth*t.controlCoordinates.targetScale-t.controlCoordinates.containerWidth)/2,t.controlCoordinates.limitOffsetY=(t.controlCoordinates.imgHeight*t.controlCoordinates.targetScale-t.controlCoordinates.containerHeight)/2,t.controlCoordinates.scaleDifference=t.controlCoordinates.targetScale-t.controlCoordinates.initialScale,t.controlCoordinates.targetOffsetX=t.controlCoordinates.imgWidth*t.controlCoordinates.targetScale<=t.controlCoordinates.containerWidth?0:t.minMax(t.controlCoordinates.initialOffsetX-(t.controlCoordinates.pinchOffsetX-t.controlCoordinates.containerOffsetX-t.controlCoordinates.containerWidth/2-t.controlCoordinates.initialOffsetX)/(t.controlCoordinates.targetScale-t.controlCoordinates.scaleDifference)*t.controlCoordinates.scaleDifference,t.controlCoordinates.limitOffsetX*-1,t.controlCoordinates.limitOffsetX),t.controlCoordinates.targetOffsetY=t.controlCoordinates.imgHeight*t.controlCoordinates.targetScale<=t.controlCoordinates.containerHeight?0:t.minMax(t.controlCoordinates.initialOffsetY-(t.controlCoordinates.pinchOffsetY-t.controlCoordinates.containerOffsetY-t.controlCoordinates.containerHeight/2-t.controlCoordinates.initialOffsetY)/(t.controlCoordinates.targetScale-t.controlCoordinates.scaleDifference)*t.controlCoordinates.scaleDifference,t.controlCoordinates.limitOffsetY*-1,t.controlCoordinates.limitOffsetY),t.zoomPanElement(t.controlCoordinates.targetOffsetX+"px",t.controlCoordinates.targetOffsetY+"px",t.controlCoordinates.targetScale),t.controlCoordinates.targetScale>1&&(t.controlCoordinates.zoomed=!0,(!t.domNodes.caption.style.opacity||t.domNodes.caption.style.opacity>0)&&t.domNodes.caption.style.display!=="none"&&t.fadeOut(t.domNodes.caption,t.options.fadeSpeed)),t.controlCoordinates.initialPinchDistance=t.controlCoordinates.targetPinchDistance,t.controlCoordinates.initialScale=t.controlCoordinates.targetScale,t.controlCoordinates.initialOffsetX=t.controlCoordinates.targetOffsetX,t.controlCoordinates.initialOffsetY=t.controlCoordinates.targetOffsetY)):(t.controlCoordinates.targetScale=t.controlCoordinates.initialScale,t.controlCoordinates.limitOffsetX=(t.controlCoordinates.imgWidth*t.controlCoordinates.targetScale-t.controlCoordinates.containerWidth)/2,t.controlCoordinates.limitOffsetY=(t.controlCoordinates.imgHeight*t.controlCoordinates.targetScale-t.controlCoordinates.containerHeight)/2,t.controlCoordinates.targetOffsetX=t.controlCoordinates.imgWidth*t.controlCoordinates.targetScale<=t.controlCoordinates.containerWidth?0:t.minMax(t.controlCoordinates.pointerOffsetX-(t.controlCoordinates.initialPointerOffsetX-t.controlCoordinates.initialOffsetX),t.controlCoordinates.limitOffsetX*-1,t.controlCoordinates.limitOffsetX),t.controlCoordinates.targetOffsetY=t.controlCoordinates.imgHeight*t.controlCoordinates.targetScale<=t.controlCoordinates.containerHeight?0:t.minMax(t.controlCoordinates.pointerOffsetY-(t.controlCoordinates.initialPointerOffsetY-t.controlCoordinates.initialOffsetY),t.controlCoordinates.limitOffsetY*-1,t.controlCoordinates.limitOffsetY),Math.abs(t.controlCoordinates.targetOffsetX)===Math.abs(t.controlCoordinates.limitOffsetX)&&(t.controlCoordinates.initialOffsetX=t.controlCoordinates.targetOffsetX,t.controlCoordinates.initialPointerOffsetX=t.controlCoordinates.pointerOffsetX),Math.abs(t.controlCoordinates.targetOffsetY)===Math.abs(t.controlCoordinates.limitOffsetY)&&(t.controlCoordinates.initialOffsetY=t.controlCoordinates.targetOffsetY,t.controlCoordinates.initialPointerOffsetY=t.controlCoordinates.pointerOffsetY),t.setZoomData(t.controlCoordinates.initialScale,t.controlCoordinates.targetOffsetX,t.controlCoordinates.targetOffsetY),t.zoomPanElement(t.controlCoordinates.targetOffsetX+"px",t.controlCoordinates.targetOffsetY+"px",t.controlCoordinates.targetScale))}if(s.type==="mousemove"&&t.controlCoordinates.mousedown){if(s.type=="touchmove")return!0;if(s.preventDefault(),t.controlCoordinates.capture===!1)return!1;t.controlCoordinates.pointerOffsetX=s.clientX,t.controlCoordinates.pointerOffsetY=s.clientY,t.controlCoordinates.targetScale=t.controlCoordinates.initialScale,t.controlCoordinates.limitOffsetX=(t.controlCoordinates.imgWidth*t.controlCoordinates.targetScale-t.controlCoordinates.containerWidth)/2,t.controlCoordinates.limitOffsetY=(t.controlCoordinates.imgHeight*t.controlCoordinates.targetScale-t.controlCoordinates.containerHeight)/2,t.controlCoordinates.targetOffsetX=t.controlCoordinates.imgWidth*t.controlCoordinates.targetScale<=t.controlCoordinates.containerWidth?0:t.minMax(t.controlCoordinates.pointerOffsetX-(t.controlCoordinates.initialPointerOffsetX-t.controlCoordinates.initialOffsetX),t.controlCoordinates.limitOffsetX*-1,t.controlCoordinates.limitOffsetX),t.controlCoordinates.targetOffsetY=t.controlCoordinates.imgHeight*t.controlCoordinates.targetScale<=t.controlCoordinates.containerHeight?0:t.minMax(t.controlCoordinates.pointerOffsetY-(t.controlCoordinates.initialPointerOffsetY-t.controlCoordinates.initialOffsetY),t.controlCoordinates.limitOffsetY*-1,t.controlCoordinates.limitOffsetY),Math.abs(t.controlCoordinates.targetOffsetX)===Math.abs(t.controlCoordinates.limitOffsetX)&&(t.controlCoordinates.initialOffsetX=t.controlCoordinates.targetOffsetX,t.controlCoordinates.initialPointerOffsetX=t.controlCoordinates.pointerOffsetX),Math.abs(t.controlCoordinates.targetOffsetY)===Math.abs(t.controlCoordinates.limitOffsetY)&&(t.controlCoordinates.initialOffsetY=t.controlCoordinates.targetOffsetY,t.controlCoordinates.initialPointerOffsetY=t.controlCoordinates.pointerOffsetY),t.setZoomData(t.controlCoordinates.initialScale,t.controlCoordinates.targetOffsetX,t.controlCoordinates.targetOffsetY),t.zoomPanElement(t.controlCoordinates.targetOffsetX+"px",t.controlCoordinates.targetOffsetY+"px",t.controlCoordinates.targetScale)}t.controlCoordinates.zoomed||(t.controlCoordinates.swipeEnd=s.pageX||s.touches[0].pageX,t.controlCoordinates.swipeYEnd=s.pageY||s.touches[0].pageY,t.controlCoordinates.swipeDiff=t.controlCoordinates.swipeStart-t.controlCoordinates.swipeEnd,t.controlCoordinates.swipeYDiff=t.controlCoordinates.swipeYStart-t.controlCoordinates.swipeYEnd,t.options.animationSlide&&t.slide(0,-t.controlCoordinates.swipeDiff+"px"))}),this.addEventListener(this.domNodes.image,["touchend."+this.eventNamespace,"mouseup."+this.eventNamespace,"touchcancel."+this.eventNamespace,"mouseleave."+this.eventNamespace,"pointerup","pointercancel","MSPointerUp","MSPointerCancel"],function(s){if(t.isTouchDevice&&s.type==="touchend"&&(t.controlCoordinates.touchCount=s.touches.length,t.controlCoordinates.touchCount===0?(t.currentImage&&t.setZoomData(t.controlCoordinates.initialScale,t.controlCoordinates.targetOffsetX,t.controlCoordinates.targetOffsetY),t.controlCoordinates.initialScale===1&&(t.controlCoordinates.zoomed=!1,t.domNodes.caption.style.display==="none"&&t.fadeIn(t.domNodes.caption,t.options.fadeSpeed)),t.controlCoordinates.initialPinchDistance=null,t.controlCoordinates.capture=!1):t.controlCoordinates.touchCount===1?(t.controlCoordinates.initialPointerOffsetX=s.touches[0].clientX,t.controlCoordinates.initialPointerOffsetY=s.touches[0].clientY):t.controlCoordinates.touchCount>1&&(t.controlCoordinates.initialPinchDistance=null)),t.controlCoordinates.mousedown){t.controlCoordinates.mousedown=!1;var a=!0;t.options.loop||(t.currentImageIndex===0&&t.controlCoordinates.swipeDiff<0&&(a=!1),t.currentImageIndex>=t.relatedElements.length-1&&t.controlCoordinates.swipeDiff>0&&(a=!1)),Math.abs(t.controlCoordinates.swipeDiff)>t.options.swipeTolerance&&a?t.loadImage(t.controlCoordinates.swipeDiff>0?1:-1):t.options.animationSlide&&t.slide(t.options.animationSpeed/1e3,0+"px"),t.options.swipeClose&&Math.abs(t.controlCoordinates.swipeYDiff)>50&&Math.abs(t.controlCoordinates.swipeDiff)<t.options.swipeTolerance&&t.close()}}),this.addEventListener(this.domNodes.image,["dblclick"],function(s){if(!t.isTouchDevice)return t.controlCoordinates.initialPointerOffsetX=s.clientX,t.controlCoordinates.initialPointerOffsetY=s.clientY,t.controlCoordinates.containerHeight=t.getDimensions(t.domNodes.image).height,t.controlCoordinates.containerWidth=t.getDimensions(t.domNodes.image).width,t.controlCoordinates.imgHeight=t.getDimensions(t.currentImage).height,t.controlCoordinates.imgWidth=t.getDimensions(t.currentImage).width,t.controlCoordinates.containerOffsetX=t.domNodes.image.offsetLeft,t.controlCoordinates.containerOffsetY=t.domNodes.image.offsetTop,t.currentImage.classList.add("sl-transition"),t.controlCoordinates.zoomed?(t.controlCoordinates.initialScale=1,t.setZoomData(t.controlCoordinates.initialScale,0,0),t.zoomPanElement(0+"px",0+"px",t.controlCoordinates.initialScale),t.controlCoordinates.zoomed=!1,t.domNodes.caption.style.display==="none"&&t.fadeIn(t.domNodes.caption,t.options.fadeSpeed)):(t.controlCoordinates.initialScale=t.options.doubleTapZoom,t.setZoomData(t.controlCoordinates.initialScale,0,0),t.zoomPanElement(0+"px",0+"px",t.controlCoordinates.initialScale),(!t.domNodes.caption.style.opacity||t.domNodes.caption.style.opacity>0)&&t.domNodes.caption.style.display!=="none"&&t.fadeOut(t.domNodes.caption,t.options.fadeSpeed),t.controlCoordinates.zoomed=!0),setTimeout(function(){t.currentImage&&(t.currentImage.classList.remove("sl-transition"),t.currentImage.style[t.transitionPrefix+"transform-origin"]=null)},200),t.controlCoordinates.capture=!0,!1})}},{key:"getDimensions",value:function(t){var e=window.getComputedStyle(t),s=t.offsetHeight,a=t.offsetWidth,l=parseFloat(e.borderTopWidth),f=parseFloat(e.borderBottomWidth),d=parseFloat(e.paddingTop),h=parseFloat(e.paddingBottom),y=parseFloat(e.borderLeftWidth),O=parseFloat(e.borderRightWidth),S=parseFloat(e.paddingLeft),b=parseFloat(e.paddingRight);return{height:s-f-l-d-h,width:a-y-O-S-b}}},{key:"updateHash",value:function(){var t="pid="+(this.currentImageIndex+1),e=window.location.href.split("#")[0]+"#"+t;this.hashReseted=!1,this.pushStateSupport?window.history[this.historyHasChanges?"replaceState":"pushState"]("",document.title,e):this.historyHasChanges?window.location.replace(e):window.location.hash=t,this.historyHasChanges||(this.urlChangedOnce=!0),this.historyHasChanges=!0}},{key:"resetHash",value:function(){this.hashReseted=!0,this.urlChangedOnce?history.back():this.pushStateSupport?history.pushState("",document.title,window.location.pathname+window.location.search):window.location.hash="",clearTimeout(this.historyUpdateTimeout)}},{key:"updateURL",value:function(){clearTimeout(this.historyUpdateTimeout),this.historyHasChanges?this.historyUpdateTimeout=setTimeout(this.updateHash.bind(this),800):this.updateHash()}},{key:"setCaption",value:function(t,e,s){var a=this;if(this.options.captions&&t&&t!==""&&typeof t<"u"){var l,f=!((l=s??this.options.captionHTML)!==null&&l!==void 0)||l?"innerHTML":"innerText";this.hide(this.domNodes.caption),this.domNodes.caption.style.width=e+"px",this.domNodes.caption[f]=t,this.domNodes.image.appendChild(this.domNodes.caption),setTimeout(function(){a.fadeIn(a.domNodes.caption,a.options.fadeSpeed)},this.options.captionDelay)}}},{key:"slide",value:function(t,e){if(!this.transitionCapable)return this.domNodes.image.style.left=e;this.domNodes.image.style[this.transitionPrefix+"transform"]="translateX("+e+")",this.domNodes.image.style[this.transitionPrefix+"transition"]=this.transitionPrefix+"transform "+t+"s linear"}},{key:"getRelated",value:function(t){var e;return t&&t!==!1&&t!=="nofollow"?e=Array.from(this.elements).filter(function(s){return s.getAttribute("rel")===t}):e=this.elements,e}},{key:"openImage",value:function(t){var e=this;t.dispatchEvent(new Event("show."+this.eventNamespace)),this.globalScrollbarWidth=this.getScrollbarWidth(),this.options.disableScroll&&(this.toggleScrollbar("hide"),this.globalScrollbarWidth=0),this.options.htmlClass&&this.options.htmlClass!==""&&document.querySelector("html").classList.add(this.options.htmlClass),document.body.appendChild(this.domNodes.wrapper),this.domNodes.wrapper.appendChild(this.domNodes.image),this.options.overlay&&document.body.appendChild(this.domNodes.overlay),this.relatedElements=this.getRelated(t.rel),this.options.showCounter&&(this.relatedElements.length==1&&this.domNodes.wrapper.contains(this.domNodes.counter)?this.domNodes.wrapper.removeChild(this.domNodes.counter):this.relatedElements.length>1&&!this.domNodes.wrapper.contains(this.domNodes.counter)&&this.domNodes.wrapper.appendChild(this.domNodes.counter)),this.options.download&&this.domNodes.download&&this.domNodes.wrapper.appendChild(this.domNodes.download),this.isAnimating=!0,this.currentImageIndex=this.relatedElements.indexOf(t);var s=t.getAttribute(this.options.sourceAttr);this.currentImage=document.createElement("img"),this.currentImage.style.display="none",this.currentImage.setAttribute("src",s),this.currentImage.dataset.scale=1,this.currentImage.dataset.translateX=0,this.currentImage.dataset.translateY=0,this.loadedImages.indexOf(s)===-1&&this.loadedImages.push(s),this.domNodes.image.innerHTML="",this.domNodes.image.setAttribute("style",""),this.domNodes.image.appendChild(this.currentImage),this.fadeIn(this.domNodes.overlay,this.options.fadeSpeed),this.fadeIn([this.domNodes.counter,this.domNodes.navigation,this.domNodes.closeButton,this.domNodes.download],this.options.fadeSpeed),this.show(this.domNodes.spinner),this.domNodes.counter.querySelector(".sl-current").innerHTML=this.currentImageIndex+1,this.domNodes.counter.querySelector(".sl-total").innerHTML=this.relatedElements.length,this.adjustImage(),this.options.preloading&&this.preload(),setTimeout(function(){t.dispatchEvent(new Event("shown."+e.eventNamespace))},this.options.animationSpeed)}},{key:"forceFocus",value:function(){var t=this;this.removeEventListener(document,"focusin."+this.eventNamespace),this.addEventListener(document,"focusin."+this.eventNamespace,function(e){document!==e.target&&t.domNodes.wrapper!==e.target&&!t.domNodes.wrapper.contains(e.target)&&t.domNodes.wrapper.focus()})}},{key:"addEventListener",value:function(t,e,s,a){t=this.wrap(t),e=this.wrap(e);var l=i(t),f;try{for(l.s();!(f=l.n()).done;){var d=f.value;d.namespaces||(d.namespaces={});var h=i(e),y;try{for(h.s();!(y=h.n()).done;){var O=y.value,S=a||!1,b=["touchstart","touchmove","mousewheel","DOMMouseScroll"].indexOf(O.split(".")[0])>=0;b&&this.isPassiveEventsSupported&&(o(S)==="object"?S.passive=!0:S={passive:!0}),d.namespaces[O]=s,d.addEventListener(O.split(".")[0],s,S)}}catch(E){h.e(E)}finally{h.f()}}}catch(E){l.e(E)}finally{l.f()}}},{key:"removeEventListener",value:function(t,e){t=this.wrap(t),e=this.wrap(e);var s=i(t),a;try{for(s.s();!(a=s.n()).done;){var l=a.value,f=i(e),d;try{for(f.s();!(d=f.n()).done;){var h=d.value;l.namespaces&&l.namespaces[h]&&(l.removeEventListener(h.split(".")[0],l.namespaces[h]),delete l.namespaces[h])}}catch(y){f.e(y)}finally{f.f()}}}catch(y){s.e(y)}finally{s.f()}}},{key:"fadeOut",value:function(t,e,s){var a=this;t=this.wrap(t);var l=i(t),f;try{for(l.s();!(f=l.n()).done;){var d=f.value;d.style.opacity=parseFloat(d)||window.getComputedStyle(d).getPropertyValue("opacity")}}catch(O){l.e(O)}finally{l.f()}this.isFadeIn=!1;var h=16.66666/(e||this.options.fadeSpeed),y=function O(){var S=parseFloat(t[0].style.opacity);if((S-=h)<0){var b=i(t),E;try{for(b.s();!(E=b.n()).done;){var Y=E.value;Y.style.display="none",Y.style.opacity=1}}catch(D){b.e(D)}finally{b.f()}s&&s.call(a,t)}else{var X=i(t),P;try{for(X.s();!(P=X.n()).done;){var L=P.value;L.style.opacity=S}}catch(D){X.e(D)}finally{X.f()}requestAnimationFrame(O)}};y()}},{key:"fadeIn",value:function(t,e,s,a){var l=this;t=this.wrap(t);var f=i(t),d;try{for(f.s();!(d=f.n()).done;){var h=d.value;h&&(h.style.opacity=0,h.style.display=a||"block")}}catch(b){f.e(b)}finally{f.f()}this.isFadeIn=!0;var y=parseFloat(t[0].dataset.opacityTarget||1),O=16.66666*y/(e||this.options.fadeSpeed),S=function b(){var E=parseFloat(t[0].style.opacity);if((E+=O)>y){var L=i(t),D;try{for(L.s();!(D=L.n()).done;){var W=D.value;W&&(W.style.opacity=y)}}catch(H){L.e(H)}finally{L.f()}s&&s.call(l,t)}else{var Y=i(t),X;try{for(Y.s();!(X=Y.n()).done;){var P=X.value;P&&(P.style.opacity=E)}}catch(H){Y.e(H)}finally{Y.f()}if(!l.isFadeIn)return;requestAnimationFrame(b)}};S()}},{key:"hide",value:function(t){t=this.wrap(t);var e=i(t),s;try{for(e.s();!(s=e.n()).done;){var a=s.value;a.style.display!="none"&&(a.dataset.initialDisplay=a.style.display),a.style.display="none"}}catch(l){e.e(l)}finally{e.f()}}},{key:"show",value:function(t,e){t=this.wrap(t);var s=i(t),a;try{for(s.s();!(a=s.n()).done;){var l=a.value;l.style.display=l.dataset.initialDisplay||e||"block"}}catch(f){s.e(f)}finally{s.f()}}},{key:"wrap",value:function(t){return typeof t[Symbol.iterator]=="function"&&typeof t!="string"?t:[t]}},{key:"on",value:function(t,e){t=this.wrap(t);var s=i(this.elements),a;try{for(s.s();!(a=s.n()).done;){var l=a.value;l.fullyNamespacedEvents||(l.fullyNamespacedEvents={});var f=i(t),d;try{for(f.s();!(d=f.n()).done;){var h=d.value;l.fullyNamespacedEvents[h]=e,l.addEventListener(h,e)}}catch(y){f.e(y)}finally{f.f()}}}catch(y){s.e(y)}finally{s.f()}return this}},{key:"off",value:function(t){t=this.wrap(t);var e=i(this.elements),s;try{for(e.s();!(s=e.n()).done;){var a=s.value,l=i(t),f;try{for(l.s();!(f=l.n()).done;){var d=f.value;typeof a.fullyNamespacedEvents<"u"&&d in a.fullyNamespacedEvents&&a.removeEventListener(d,a.fullyNamespacedEvents[d])}}catch(h){l.e(h)}finally{l.f()}}}catch(h){e.e(h)}finally{e.f()}return this}},{key:"open",value:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;t=t||this.elements[0],typeof jQuery<"u"&&t instanceof jQuery&&(t=t.get(0)),e>0&&(t=this.elements[e]),this.initialImageIndex=this.elements.indexOf(t),this.initialImageIndex>-1&&this.openImage(t)}},{key:"openPosition",value:function(t){var e=this.elements[t];this.open(e,t)}},{key:"next",value:function(){this.loadImage(1)}},{key:"prev",value:function(){this.loadImage(-1)}},{key:"getLighboxData",value:function(){return{currentImageIndex:this.currentImageIndex,currentImage:this.currentImage,globalScrollbarWidth:this.globalScrollbarWidth}}},{key:"destroy",value:function(){this.off(["close."+this.eventNamespace,"closed."+this.eventNamespace,"nextImageLoaded."+this.eventNamespace,"prevImageLoaded."+this.eventNamespace,"change."+this.eventNamespace,"nextDone."+this.eventNamespace,"prevDone."+this.eventNamespace,"error."+this.eventNamespace,"changed."+this.eventNamespace,"next."+this.eventNamespace,"prev."+this.eventNamespace,"show."+this.eventNamespace,"shown."+this.eventNamespace]),this.removeEventListener(this.elements,"click."+this.eventNamespace),this.removeEventListener(document,"focusin."+this.eventNamespace),this.removeEventListener(document.body,"contextmenu."+this.eventNamespace),this.removeEventListener(document.body,"keyup."+this.eventNamespace),this.removeEventListener(this.domNodes.navigation.getElementsByTagName("button"),"click."+this.eventNamespace),this.removeEventListener(this.domNodes.closeButton,"click."+this.eventNamespace),this.removeEventListener(window,"resize."+this.eventNamespace),this.removeEventListener(window,"hashchange."+this.eventNamespace),this.close(),this.isOpen&&(document.body.removeChild(this.domNodes.wrapper),document.body.removeChild(this.domNodes.overlay)),this.elements=null}},{key:"refresh",value:function(){if(!this.initialSelector)throw"refreshing only works when you initialize using a selector!";var t=this.options,e=this.initialSelector;return this.destroy(),this.constructor(e,t),this}}]),c}(),k=A;I.default=k,z.SimpleLightbox=A})(M);const B=q(M);class Z{constructor(o,i){N(this,"defaultOptions",{sourceAttr:"href",overlay:!0,overlayOpacity:.7,spinner:!0,nav:!0,navText:["&lsaquo;","&rsaquo;"],captions:!0,captionDelay:0,captionSelector:"img",captionType:"attr",captionsData:"title",captionPosition:"bottom",captionClass:"",captionHTML:!0,close:!0,closeText:"&times;",swipeClose:!0,showCounter:!0,fileExt:"png|jpg|jpeg|gif|webp",animationSlide:!0,animationSpeed:250,preloading:!0,enableKeyboard:!0,loop:!0,rel:!1,docClose:!0,swipeTolerance:50,className:"simple-lightbox",widthRatio:.8,heightRatio:.9,scaleImageToRatio:!1,disableRightClick:!1,disableScroll:!0,alertError:!0,alertErrorMessage:"Image not found, next image will be loaded",additionalHtml:!1,history:!0,throttleInterval:0,doubleTapZoom:2,maxZoom:10,htmlClass:"has-lightbox",rtl:!1,fixedClass:"sl-fixed",fadeSpeed:300,uniqueImages:!0,focus:!0,scrollZoom:!0,scrollZoomFactor:.5,download:!1});N(this,"transitionPrefix");N(this,"isPassiveEventsSupported");N(this,"transitionCapable",!1);N(this,"isTouchDevice","ontouchstart"in window);N(this,"isAppleDevice",/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform));N(this,"initialLocationHash");N(this,"pushStateSupport","pushState"in history);N(this,"isOpen",!1);N(this,"isAnimating",!1);N(this,"isClosing",!1);N(this,"isFadeIn",!1);N(this,"urlChangedOnce",!1);N(this,"hashReseted",!1);N(this,"historyHasChanges",!1);N(this,"historyUpdateTimeout",null);N(this,"currentImage");N(this,"eventNamespace","simplelightbox");N(this,"domNodes",{});N(this,"loadedImages",[]);N(this,"initialImageIndex",0);N(this,"currentImageIndex",0);N(this,"initialSelector",null);N(this,"globalScrollbarWidth",0);N(this,"controlCoordinates",{swipeDiff:0,swipeYDiff:0,swipeStart:0,swipeEnd:0,swipeYStart:0,swipeYEnd:0,mousedown:!1,imageLeft:0,zoomed:!1,containerHeight:0,containerWidth:0,containerOffsetX:0,containerOffsetY:0,imgHeight:0,imgWidth:0,capture:!1,initialOffsetX:0,initialOffsetY:0,initialPointerOffsetX:0,initialPointerOffsetY:0,initialPointerOffsetX2:0,initialPointerOffsetY2:0,initialScale:1,initialPinchDistance:0,pointerOffsetX:0,pointerOffsetY:0,pointerOffsetX2:0,pointerOffsetY2:0,targetOffsetX:0,targetOffsetY:0,targetScale:0,pinchOffsetX:0,pinchOffsetY:0,limitOffsetX:0,limitOffsetY:0,scaleDifference:0,targetPinchDistance:0,touchCount:0,doubleTapped:!1,touchmoveCount:0});if(this.options=Object.assign(this.defaultOptions,i),this.isPassiveEventsSupported=this.checkPassiveEventsSupport(),typeof o=="string"?(this.initialSelector=o,this.elements=Array.from(document.querySelectorAll(o))):this.elements=typeof o.length<"u"&&o.length>0?Array.from(o):[o],this.relatedElements=[],this.transitionPrefix=this.calculateTransitionPrefix(),this.transitionCapable=this.transitionPrefix!==!1,this.initialLocationHash=this.hash,this.options.rel&&(this.elements=this.getRelated(this.options.rel)),this.options.uniqueImages){let n=[];this.elements=Array.from(this.elements).filter(m=>{let u=m.getAttribute(this.options.sourceAttr);return n.indexOf(u)===-1?(n.push(u),!0):!1})}this.createDomNodes(),this.options.close&&this.domNodes.wrapper.appendChild(this.domNodes.closeButton),this.options.nav&&this.domNodes.wrapper.appendChild(this.domNodes.navigation),this.options.spinner&&this.domNodes.wrapper.appendChild(this.domNodes.spinner),this.addEventListener(this.elements,"click."+this.eventNamespace,n=>{if(this.isValidLink(n.currentTarget)){if(n.preventDefault(),this.isAnimating)return!1;this.initialImageIndex=this.elements.indexOf(n.currentTarget),this.openImage(n.currentTarget)}}),this.options.docClose&&this.addEventListener(this.domNodes.wrapper,["click."+this.eventNamespace,"touchstart."+this.eventNamespace],n=>{this.isOpen&&n.target===n.currentTarget&&this.close()}),this.options.disableRightClick&&this.addEventListener(document.body,"contextmenu."+this.eventNamespace,n=>{n.target.parentElement.classList.contains("sl-image")&&n.preventDefault()}),this.options.enableKeyboard&&this.addEventListener(document.body,"keyup."+this.eventNamespace,this.throttle(n=>{if(this.controlCoordinates.swipeDiff=0,this.isAnimating&&n.key==="Escape"){this.currentImage.setAttribute("src",""),this.isAnimating=!1,this.close();return}this.isOpen&&(n.preventDefault(),n.key==="Escape"&&this.close(),!this.isAnimating&&["ArrowLeft","ArrowRight"].indexOf(n.key)>-1&&this.loadImage(n.key==="ArrowRight"?1:-1))},this.options.throttleInterval)),this.addEvents()}checkPassiveEventsSupport(){let o=!1;try{let i=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("testPassive",null,i),window.removeEventListener("testPassive",null,i)}catch{}return o}getCaptionElement(o){if(this.options.captionSelector.startsWith("+")){let i=this.options.captionSelector.replace(/^\+/,"").trimStart(),n=o.nextElementSibling;return n&&n.matches(i)?n:!1}else if(this.options.captionSelector.startsWith(">")){let i=this.options.captionSelector.replace(/^>/,"").trimStart();return o.querySelector(i)}else return o.querySelector(this.options.captionSelector)}generateQuerySelector(o){const{tagName:i,id:n,className:m,parentNode:u}=o;if(i==="HTML")return"HTML";let p=i;if(p+=n!==""?`#${n}`:"",m){const g=m.trim().split(/\s/);for(let w=0;w<g.length;w++)p+=`.${g[w]}`}let C=1;for(let g=o;g.previousElementSibling;g=g.previousElementSibling)C+=1;return p+=`:nth-child(${C})`,`${this.generateQuerySelector(u)} > ${p}`}createDomNodes(){if(this.domNodes.overlay=document.createElement("div"),this.domNodes.overlay.classList.add("sl-overlay"),this.domNodes.overlay.dataset.opacityTarget=this.options.overlayOpacity,this.domNodes.closeButton=document.createElement("button"),this.domNodes.closeButton.classList.add("sl-close"),this.domNodes.closeButton.innerHTML=this.options.closeText,this.domNodes.spinner=document.createElement("div"),this.domNodes.spinner.classList.add("sl-spinner"),this.domNodes.spinner.innerHTML="<div></div>",this.domNodes.navigation=document.createElement("div"),this.domNodes.navigation.classList.add("sl-navigation"),this.domNodes.navigation.innerHTML=`<button class="sl-prev">${this.options.navText[0]}</button><button class="sl-next">${this.options.navText[1]}</button>`,this.domNodes.counter=document.createElement("div"),this.domNodes.counter.classList.add("sl-counter"),this.domNodes.counter.innerHTML='<span class="sl-current"></span>/<span class="sl-total"></span>',this.domNodes.download=document.createElement("div"),this.domNodes.download.classList.add("sl-download"),this.domNodes.downloadLink=document.createElement("a"),this.domNodes.downloadLink.setAttribute("download",""),this.domNodes.downloadLink.textContent=this.options.download,this.domNodes.download.appendChild(this.domNodes.downloadLink),this.domNodes.caption=document.createElement("div"),this.domNodes.caption.classList.add("sl-caption","pos-"+this.options.captionPosition),this.options.captionClass){let o=this.options.captionClass.split(/[\s,]+/);this.domNodes.caption.classList.add(...o)}this.domNodes.image=document.createElement("div"),this.domNodes.image.classList.add("sl-image"),this.domNodes.wrapper=document.createElement("div"),this.domNodes.wrapper.classList.add("sl-wrapper"),this.domNodes.wrapper.setAttribute("tabindex",-1),this.domNodes.wrapper.setAttribute("role","dialog"),this.domNodes.wrapper.setAttribute("aria-hidden",!1),this.options.className&&this.domNodes.wrapper.classList.add(this.options.className),this.options.rtl&&this.domNodes.wrapper.classList.add("sl-dir-rtl")}throttle(o,i){let n;return function(){n||(o.apply(this,arguments),n=!0,setTimeout(function(){return n=!1},i))}}isValidLink(o){return!this.options.fileExt||o.getAttribute(this.options.sourceAttr)&&new RegExp("("+this.options.fileExt+")($|\\?.*$)","i").test(o.getAttribute(this.options.sourceAttr))}calculateTransitionPrefix(){let o=(document.body||document.documentElement).style;return"transition"in o?"":"WebkitTransition"in o?"-webkit-":"MozTransition"in o?"-moz-":"OTransition"in o?"-o":!1}getScrollbarWidth(){let o=0,i=document.createElement("div");return i.classList.add("sl-scrollbar-measure"),document.body.appendChild(i),o=i.offsetWidth-i.clientWidth,document.body.removeChild(i),o}toggleScrollbar(o){let i=0,n=[].slice.call(document.querySelectorAll("."+this.options.fixedClass));if(o==="hide"){let m=window.innerWidth;if(!m){let u=document.documentElement.getBoundingClientRect();m=u.right-Math.abs(u.left)}if(document.body.clientWidth<m||this.isAppleDevice){let u=parseInt(window.getComputedStyle(document.body).paddingRight||0,10);i=this.getScrollbarWidth(),document.body.dataset.originalPaddingRight=u,(i>0||i==0&&this.isAppleDevice)&&(document.body.classList.add("hidden-scroll"),document.body.style.paddingRight=u+i+"px",n.forEach(p=>{const C=p.style.paddingRight,g=window.getComputedStyle(p)["padding-right"];p.dataset.originalPaddingRight=C,p.style.paddingRight=`${parseFloat(g)+i}px`}))}}else document.body.classList.remove("hidden-scroll"),document.body.style.paddingRight=document.body.dataset.originalPaddingRight+"px",n.forEach(m=>{const u=m.dataset.originalPaddingRight;typeof u<"u"&&(m.style.paddingRight=u)});return i}close(){if(!this.isOpen||this.isAnimating||this.isClosing)return!1;this.isClosing=!0;let o=this.relatedElements[this.currentImageIndex];o.dispatchEvent(new Event("close.simplelightbox")),this.options.history&&(this.historyHasChanges=!1,this.hashReseted||this.resetHash()),this.removeEventListener(document,"focusin."+this.eventNamespace),this.fadeOut(this.domNodes.overlay,this.options.fadeSpeed),this.fadeOut(document.querySelectorAll(".sl-image img,  .sl-close, .sl-navigation, .sl-image .sl-caption, .sl-counter"),this.options.fadeSpeed,()=>{this.options.disableScroll&&this.toggleScrollbar("show"),this.options.htmlClass&&this.options.htmlClass!==""&&document.querySelector("html").classList.remove(this.options.htmlClass),document.body.removeChild(this.domNodes.wrapper),this.options.overlay&&document.body.removeChild(this.domNodes.overlay),this.domNodes.additionalHtml=null,this.domNodes.download=null,o.dispatchEvent(new Event("closed.simplelightbox")),this.isClosing=!1}),this.currentImage=null,this.isOpen=!1,this.isAnimating=!1;for(let i in this.controlCoordinates)this.controlCoordinates[i]=0;this.controlCoordinates.mousedown=!1,this.controlCoordinates.zoomed=!1,this.controlCoordinates.capture=!1,this.controlCoordinates.initialScale=this.minMax(1,1,this.options.maxZoom),this.controlCoordinates.doubleTapped=!1}get hash(){return window.location.hash.substring(1)}preload(){let o=this.currentImageIndex,i=this.relatedElements.length,n=o+1<0?i-1:o+1>=i-1?0:o+1,m=o-1<0?i-1:o-1>=i-1?0:o-1,u=new Image,p=new Image;u.addEventListener("load",C=>{let g=C.target.getAttribute("src");this.loadedImages.indexOf(g)===-1&&this.loadedImages.push(g),this.relatedElements[o].dispatchEvent(new Event("nextImageLoaded."+this.eventNamespace))}),u.setAttribute("src",this.relatedElements[n].getAttribute(this.options.sourceAttr)),p.addEventListener("load",C=>{let g=C.target.getAttribute("src");this.loadedImages.indexOf(g)===-1&&this.loadedImages.push(g),this.relatedElements[o].dispatchEvent(new Event("prevImageLoaded."+this.eventNamespace))}),p.setAttribute("src",this.relatedElements[m].getAttribute(this.options.sourceAttr))}loadImage(o){let i=o;this.options.rtl&&(o=-o),this.relatedElements[this.currentImageIndex].dispatchEvent(new Event("change."+this.eventNamespace)),this.relatedElements[this.currentImageIndex].dispatchEvent(new Event((o===1?"next":"prev")+"."+this.eventNamespace));let n=this.currentImageIndex+o;if(this.isAnimating||(n<0||n>=this.relatedElements.length)&&this.options.loop===!1)return!1;this.currentImageIndex=n<0?this.relatedElements.length-1:n>this.relatedElements.length-1?0:n,this.domNodes.counter.querySelector(".sl-current").innerHTML=this.currentImageIndex+1,this.options.animationSlide&&this.slide(this.options.animationSpeed/1e3,-100*i-this.controlCoordinates.swipeDiff+"px"),this.fadeOut(this.domNodes.image,this.options.fadeSpeed,()=>{this.isAnimating=!0,this.isClosing?this.isAnimating=!1:setTimeout(()=>{let m=this.relatedElements[this.currentImageIndex];this.currentImage&&(this.currentImage.setAttribute("src",m.getAttribute(this.options.sourceAttr)),this.loadedImages.indexOf(m.getAttribute(this.options.sourceAttr))===-1&&this.show(this.domNodes.spinner),this.domNodes.image.contains(this.domNodes.caption)&&this.domNodes.image.removeChild(this.domNodes.caption),this.adjustImage(i),this.options.preloading&&this.preload())},100)})}adjustImage(o){if(!this.currentImage)return!1;let i=new Image,n=window.innerWidth*this.options.widthRatio,m=window.innerHeight*this.options.heightRatio;i.setAttribute("src",this.currentImage.getAttribute("src")),this.currentImage.dataset.scale=1,this.currentImage.dataset.translateX=0,this.currentImage.dataset.translateY=0,this.zoomPanElement(0,0,1),i.addEventListener("error",u=>{this.relatedElements[this.currentImageIndex].dispatchEvent(new Event("error."+this.eventNamespace)),this.isAnimating=!1,this.isOpen=!0,this.domNodes.spinner.style.display="none";let p=o===1||o===-1;if(this.initialImageIndex===this.currentImageIndex&&p)return this.close();this.options.alertError&&alert(this.options.alertErrorMessage),this.loadImage(p?o:1)}),i.addEventListener("load",u=>{typeof o<"u"&&(this.relatedElements[this.currentImageIndex].dispatchEvent(new Event("changed."+this.eventNamespace)),this.relatedElements[this.currentImageIndex].dispatchEvent(new Event((o===1?"nextDone":"prevDone")+"."+this.eventNamespace))),this.options.history&&this.updateURL(),this.loadedImages.indexOf(this.currentImage.getAttribute("src"))===-1&&this.loadedImages.push(this.currentImage.getAttribute("src"));let p=u.target.width,C=u.target.height;if(this.options.scaleImageToRatio||p>n||C>m){let x=p/C>n/m?p/n:C/m;p/=x,C/=x}this.domNodes.image.style.top=(window.innerHeight-C)/2+"px",this.domNodes.image.style.left=(window.innerWidth-p-this.globalScrollbarWidth)/2+"px",this.domNodes.image.style.width=p+"px",this.domNodes.image.style.height=C+"px",this.domNodes.spinner.style.display="none",this.options.focus&&this.forceFocus(),this.fadeIn(this.currentImage,this.options.fadeSpeed,()=>{this.options.focus&&this.domNodes.wrapper.focus()}),this.isOpen=!0;let g,w;typeof this.options.captionSelector=="string"?g=this.options.captionSelector==="self"?this.relatedElements[this.currentImageIndex]:this.getCaptionElement(this.relatedElements[this.currentImageIndex]):typeof this.options.captionSelector=="function"&&(g=this.options.captionSelector(this.relatedElements[this.currentImageIndex])),this.options.captions&&g&&(this.options.captionType==="data"?w=g.dataset[this.options.captionsData]:this.options.captionType==="text"?w=g.innerHTML:w=g.getAttribute(this.options.captionsData)),this.options.loop?this.relatedElements.length===1?this.hide(this.domNodes.navigation.querySelectorAll(".sl-prev, .sl-next")):this.show(this.domNodes.navigation.querySelectorAll(".sl-prev, .sl-next")):(this.currentImageIndex===0&&this.hide(this.domNodes.navigation.querySelector(".sl-prev")),this.currentImageIndex>=this.relatedElements.length-1&&this.hide(this.domNodes.navigation.querySelector(".sl-next")),this.currentImageIndex>0&&this.show(this.domNodes.navigation.querySelector(".sl-prev")),this.currentImageIndex<this.relatedElements.length-1&&this.show(this.domNodes.navigation.querySelector(".sl-next"))),o===1||o===-1?(this.options.animationSlide&&(this.slide(0,100*o+"px"),setTimeout(()=>{this.slide(this.options.animationSpeed/1e3,0+"px")},50)),this.fadeIn(this.domNodes.image,this.options.fadeSpeed,()=>{this.isAnimating=!1,this.setCaption(w,p)})):(this.isAnimating=!1,this.setCaption(w,p)),this.options.additionalHtml&&!this.domNodes.additionalHtml&&(this.domNodes.additionalHtml=document.createElement("div"),this.domNodes.additionalHtml.classList.add("sl-additional-html"),this.domNodes.additionalHtml.innerHTML=this.options.additionalHtml,this.domNodes.image.appendChild(this.domNodes.additionalHtml)),this.options.download&&this.domNodes.downloadLink.setAttribute("href",this.currentImage.getAttribute("src"))})}zoomPanElement(o,i,n){this.currentImage.style[this.transitionPrefix+"transform"]="translate("+o+","+i+") scale("+n+")"}minMax(o,i,n){return o<i?i:o>n?n:o}setZoomData(o,i,n){this.currentImage.dataset.scale=o,this.currentImage.dataset.translateX=i,this.currentImage.dataset.translateY=n}hashchangeHandler(){this.isOpen&&this.hash===this.initialLocationHash&&(this.hashReseted=!0,this.close())}addEvents(){if(this.addEventListener(window,"resize."+this.eventNamespace,o=>{this.isOpen&&this.adjustImage()}),this.addEventListener(this.domNodes.closeButton,["click."+this.eventNamespace,"touchstart."+this.eventNamespace],this.close.bind(this)),this.options.history&&setTimeout(()=>{this.addEventListener(window,"hashchange."+this.eventNamespace,o=>{this.isOpen&&this.hashchangeHandler()})},40),this.addEventListener(this.domNodes.navigation.getElementsByTagName("button"),"click."+this.eventNamespace,o=>{if(!o.currentTarget.tagName.match(/button/i))return!0;o.preventDefault(),this.controlCoordinates.swipeDiff=0,this.loadImage(o.currentTarget.classList.contains("sl-next")?1:-1)}),this.options.scrollZoom){let o=1;this.addEventListener(this.domNodes.image,["mousewheel","DOMMouseScroll"],i=>{if(this.controlCoordinates.mousedown||this.isAnimating||this.isClosing||!this.isOpen)return!0;this.controlCoordinates.containerHeight==0&&(this.controlCoordinates.containerHeight=this.getDimensions(this.domNodes.image).height,this.controlCoordinates.containerWidth=this.getDimensions(this.domNodes.image).width,this.controlCoordinates.imgHeight=this.getDimensions(this.currentImage).height,this.controlCoordinates.imgWidth=this.getDimensions(this.currentImage).width,this.controlCoordinates.containerOffsetX=this.domNodes.image.offsetLeft,this.controlCoordinates.containerOffsetY=this.domNodes.image.offsetTop,this.controlCoordinates.initialOffsetX=parseFloat(this.currentImage.dataset.translateX),this.controlCoordinates.initialOffsetY=parseFloat(this.currentImage.dataset.translateY));let n=i.delta||i.wheelDelta;n===void 0&&(n=i.detail),n=Math.max(-1,Math.min(1,n)),o+=n*this.options.scrollZoomFactor*o,o=Math.max(1,Math.min(this.options.maxZoom,o)),this.controlCoordinates.targetScale=o;let m=document.documentElement.scrollTop||document.body.scrollTop;this.controlCoordinates.pinchOffsetX=i.pageX,this.controlCoordinates.pinchOffsetY=i.pageY-m||0,this.controlCoordinates.limitOffsetX=(this.controlCoordinates.imgWidth*this.controlCoordinates.targetScale-this.controlCoordinates.containerWidth)/2,this.controlCoordinates.limitOffsetY=(this.controlCoordinates.imgHeight*this.controlCoordinates.targetScale-this.controlCoordinates.containerHeight)/2,this.controlCoordinates.scaleDifference=this.controlCoordinates.targetScale-this.controlCoordinates.initialScale,this.controlCoordinates.targetOffsetX=this.controlCoordinates.imgWidth*this.controlCoordinates.targetScale<=this.controlCoordinates.containerWidth?0:this.minMax(this.controlCoordinates.initialOffsetX-(this.controlCoordinates.pinchOffsetX-this.controlCoordinates.containerOffsetX-this.controlCoordinates.containerWidth/2-this.controlCoordinates.initialOffsetX)/(this.controlCoordinates.targetScale-this.controlCoordinates.scaleDifference)*this.controlCoordinates.scaleDifference,this.controlCoordinates.limitOffsetX*-1,this.controlCoordinates.limitOffsetX),this.controlCoordinates.targetOffsetY=this.controlCoordinates.imgHeight*this.controlCoordinates.targetScale<=this.controlCoordinates.containerHeight?0:this.minMax(this.controlCoordinates.initialOffsetY-(this.controlCoordinates.pinchOffsetY-this.controlCoordinates.containerOffsetY-this.controlCoordinates.containerHeight/2-this.controlCoordinates.initialOffsetY)/(this.controlCoordinates.targetScale-this.controlCoordinates.scaleDifference)*this.controlCoordinates.scaleDifference,this.controlCoordinates.limitOffsetY*-1,this.controlCoordinates.limitOffsetY),this.zoomPanElement(this.controlCoordinates.targetOffsetX+"px",this.controlCoordinates.targetOffsetY+"px",this.controlCoordinates.targetScale),this.controlCoordinates.targetScale>1?(this.controlCoordinates.zoomed=!0,(!this.domNodes.caption.style.opacity||this.domNodes.caption.style.opacity>0)&&this.domNodes.caption.style.display!=="none"&&this.fadeOut(this.domNodes.caption,this.options.fadeSpeed)):(this.controlCoordinates.initialScale===1&&(this.controlCoordinates.zoomed=!1,this.domNodes.caption.style.display==="none"&&this.fadeIn(this.domNodes.caption,this.options.fadeSpeed)),this.controlCoordinates.initialPinchDistance=null,this.controlCoordinates.capture=!1),this.controlCoordinates.initialPinchDistance=this.controlCoordinates.targetPinchDistance,this.controlCoordinates.initialScale=this.controlCoordinates.targetScale,this.controlCoordinates.initialOffsetX=this.controlCoordinates.targetOffsetX,this.controlCoordinates.initialOffsetY=this.controlCoordinates.targetOffsetY,this.setZoomData(this.controlCoordinates.targetScale,this.controlCoordinates.targetOffsetX,this.controlCoordinates.targetOffsetY),this.zoomPanElement(this.controlCoordinates.targetOffsetX+"px",this.controlCoordinates.targetOffsetY+"px",this.controlCoordinates.targetScale)})}this.addEventListener(this.domNodes.image,["touchstart."+this.eventNamespace,"mousedown."+this.eventNamespace],o=>{if(o.target.tagName==="A"&&o.type==="touchstart")return!0;if(o.type==="mousedown")o.preventDefault(),this.controlCoordinates.initialPointerOffsetX=o.clientX,this.controlCoordinates.initialPointerOffsetY=o.clientY,this.controlCoordinates.containerHeight=this.getDimensions(this.domNodes.image).height,this.controlCoordinates.containerWidth=this.getDimensions(this.domNodes.image).width,this.controlCoordinates.imgHeight=this.getDimensions(this.currentImage).height,this.controlCoordinates.imgWidth=this.getDimensions(this.currentImage).width,this.controlCoordinates.containerOffsetX=this.domNodes.image.offsetLeft,this.controlCoordinates.containerOffsetY=this.domNodes.image.offsetTop,this.controlCoordinates.initialOffsetX=parseFloat(this.currentImage.dataset.translateX),this.controlCoordinates.initialOffsetY=parseFloat(this.currentImage.dataset.translateY),this.controlCoordinates.capture=!0;else{if(this.controlCoordinates.touchCount=o.touches.length,this.controlCoordinates.initialPointerOffsetX=o.touches[0].clientX,this.controlCoordinates.initialPointerOffsetY=o.touches[0].clientY,this.controlCoordinates.containerHeight=this.getDimensions(this.domNodes.image).height,this.controlCoordinates.containerWidth=this.getDimensions(this.domNodes.image).width,this.controlCoordinates.imgHeight=this.getDimensions(this.currentImage).height,this.controlCoordinates.imgWidth=this.getDimensions(this.currentImage).width,this.controlCoordinates.containerOffsetX=this.domNodes.image.offsetLeft,this.controlCoordinates.containerOffsetY=this.domNodes.image.offsetTop,this.controlCoordinates.touchCount===1){if(!this.controlCoordinates.doubleTapped)this.controlCoordinates.doubleTapped=!0,setTimeout(()=>{this.controlCoordinates.doubleTapped=!1},300);else return this.currentImage.classList.add("sl-transition"),this.controlCoordinates.zoomed?(this.controlCoordinates.initialScale=1,this.setZoomData(this.controlCoordinates.initialScale,0,0),this.zoomPanElement(0+"px",0+"px",this.controlCoordinates.initialScale),this.controlCoordinates.zoomed=!1):(this.controlCoordinates.initialScale=this.options.doubleTapZoom,this.setZoomData(this.controlCoordinates.initialScale,0,0),this.zoomPanElement(0+"px",0+"px",this.controlCoordinates.initialScale),(!this.domNodes.caption.style.opacity||this.domNodes.caption.style.opacity>0)&&this.domNodes.caption.style.display!=="none"&&this.fadeOut(this.domNodes.caption,this.options.fadeSpeed),this.controlCoordinates.zoomed=!0),setTimeout(()=>{this.currentImage&&this.currentImage.classList.remove("sl-transition")},200),!1;this.controlCoordinates.initialOffsetX=parseFloat(this.currentImage.dataset.translateX),this.controlCoordinates.initialOffsetY=parseFloat(this.currentImage.dataset.translateY)}else this.controlCoordinates.touchCount===2&&(this.controlCoordinates.initialPointerOffsetX2=o.touches[1].clientX,this.controlCoordinates.initialPointerOffsetY2=o.touches[1].clientY,this.controlCoordinates.initialOffsetX=parseFloat(this.currentImage.dataset.translateX),this.controlCoordinates.initialOffsetY=parseFloat(this.currentImage.dataset.translateY),this.controlCoordinates.pinchOffsetX=(this.controlCoordinates.initialPointerOffsetX+this.controlCoordinates.initialPointerOffsetX2)/2,this.controlCoordinates.pinchOffsetY=(this.controlCoordinates.initialPointerOffsetY+this.controlCoordinates.initialPointerOffsetY2)/2,this.controlCoordinates.initialPinchDistance=Math.sqrt((this.controlCoordinates.initialPointerOffsetX-this.controlCoordinates.initialPointerOffsetX2)*(this.controlCoordinates.initialPointerOffsetX-this.controlCoordinates.initialPointerOffsetX2)+(this.controlCoordinates.initialPointerOffsetY-this.controlCoordinates.initialPointerOffsetY2)*(this.controlCoordinates.initialPointerOffsetY-this.controlCoordinates.initialPointerOffsetY2)));this.controlCoordinates.capture=!0}return this.controlCoordinates.mousedown?!0:(this.transitionCapable&&(this.controlCoordinates.imageLeft=parseInt(this.domNodes.image.style.left,10)),this.controlCoordinates.mousedown=!0,this.controlCoordinates.swipeDiff=0,this.controlCoordinates.swipeYDiff=0,this.controlCoordinates.swipeStart=o.pageX||o.touches[0].pageX,this.controlCoordinates.swipeYStart=o.pageY||o.touches[0].pageY,!1)}),this.addEventListener(this.domNodes.image,["touchmove."+this.eventNamespace,"mousemove."+this.eventNamespace,"MSPointerMove"],o=>{if(!this.controlCoordinates.mousedown)return!0;if(o.type==="touchmove"){if(this.controlCoordinates.capture===!1)return!1;this.controlCoordinates.pointerOffsetX=o.touches[0].clientX,this.controlCoordinates.pointerOffsetY=o.touches[0].clientY,this.controlCoordinates.touchCount=o.touches.length,this.controlCoordinates.touchmoveCount++,this.controlCoordinates.touchCount>1?(this.controlCoordinates.pointerOffsetX2=o.touches[1].clientX,this.controlCoordinates.pointerOffsetY2=o.touches[1].clientY,this.controlCoordinates.targetPinchDistance=Math.sqrt((this.controlCoordinates.pointerOffsetX-this.controlCoordinates.pointerOffsetX2)*(this.controlCoordinates.pointerOffsetX-this.controlCoordinates.pointerOffsetX2)+(this.controlCoordinates.pointerOffsetY-this.controlCoordinates.pointerOffsetY2)*(this.controlCoordinates.pointerOffsetY-this.controlCoordinates.pointerOffsetY2)),this.controlCoordinates.initialPinchDistance===null&&(this.controlCoordinates.initialPinchDistance=this.controlCoordinates.targetPinchDistance),Math.abs(this.controlCoordinates.initialPinchDistance-this.controlCoordinates.targetPinchDistance)>=1&&(this.controlCoordinates.targetScale=this.minMax(this.controlCoordinates.targetPinchDistance/this.controlCoordinates.initialPinchDistance*this.controlCoordinates.initialScale,1,this.options.maxZoom),this.controlCoordinates.limitOffsetX=(this.controlCoordinates.imgWidth*this.controlCoordinates.targetScale-this.controlCoordinates.containerWidth)/2,this.controlCoordinates.limitOffsetY=(this.controlCoordinates.imgHeight*this.controlCoordinates.targetScale-this.controlCoordinates.containerHeight)/2,this.controlCoordinates.scaleDifference=this.controlCoordinates.targetScale-this.controlCoordinates.initialScale,this.controlCoordinates.targetOffsetX=this.controlCoordinates.imgWidth*this.controlCoordinates.targetScale<=this.controlCoordinates.containerWidth?0:this.minMax(this.controlCoordinates.initialOffsetX-(this.controlCoordinates.pinchOffsetX-this.controlCoordinates.containerOffsetX-this.controlCoordinates.containerWidth/2-this.controlCoordinates.initialOffsetX)/(this.controlCoordinates.targetScale-this.controlCoordinates.scaleDifference)*this.controlCoordinates.scaleDifference,this.controlCoordinates.limitOffsetX*-1,this.controlCoordinates.limitOffsetX),this.controlCoordinates.targetOffsetY=this.controlCoordinates.imgHeight*this.controlCoordinates.targetScale<=this.controlCoordinates.containerHeight?0:this.minMax(this.controlCoordinates.initialOffsetY-(this.controlCoordinates.pinchOffsetY-this.controlCoordinates.containerOffsetY-this.controlCoordinates.containerHeight/2-this.controlCoordinates.initialOffsetY)/(this.controlCoordinates.targetScale-this.controlCoordinates.scaleDifference)*this.controlCoordinates.scaleDifference,this.controlCoordinates.limitOffsetY*-1,this.controlCoordinates.limitOffsetY),this.zoomPanElement(this.controlCoordinates.targetOffsetX+"px",this.controlCoordinates.targetOffsetY+"px",this.controlCoordinates.targetScale),this.controlCoordinates.targetScale>1&&(this.controlCoordinates.zoomed=!0,(!this.domNodes.caption.style.opacity||this.domNodes.caption.style.opacity>0)&&this.domNodes.caption.style.display!=="none"&&this.fadeOut(this.domNodes.caption,this.options.fadeSpeed)),this.controlCoordinates.initialPinchDistance=this.controlCoordinates.targetPinchDistance,this.controlCoordinates.initialScale=this.controlCoordinates.targetScale,this.controlCoordinates.initialOffsetX=this.controlCoordinates.targetOffsetX,this.controlCoordinates.initialOffsetY=this.controlCoordinates.targetOffsetY)):(this.controlCoordinates.targetScale=this.controlCoordinates.initialScale,this.controlCoordinates.limitOffsetX=(this.controlCoordinates.imgWidth*this.controlCoordinates.targetScale-this.controlCoordinates.containerWidth)/2,this.controlCoordinates.limitOffsetY=(this.controlCoordinates.imgHeight*this.controlCoordinates.targetScale-this.controlCoordinates.containerHeight)/2,this.controlCoordinates.targetOffsetX=this.controlCoordinates.imgWidth*this.controlCoordinates.targetScale<=this.controlCoordinates.containerWidth?0:this.minMax(this.controlCoordinates.pointerOffsetX-(this.controlCoordinates.initialPointerOffsetX-this.controlCoordinates.initialOffsetX),this.controlCoordinates.limitOffsetX*-1,this.controlCoordinates.limitOffsetX),this.controlCoordinates.targetOffsetY=this.controlCoordinates.imgHeight*this.controlCoordinates.targetScale<=this.controlCoordinates.containerHeight?0:this.minMax(this.controlCoordinates.pointerOffsetY-(this.controlCoordinates.initialPointerOffsetY-this.controlCoordinates.initialOffsetY),this.controlCoordinates.limitOffsetY*-1,this.controlCoordinates.limitOffsetY),Math.abs(this.controlCoordinates.targetOffsetX)===Math.abs(this.controlCoordinates.limitOffsetX)&&(this.controlCoordinates.initialOffsetX=this.controlCoordinates.targetOffsetX,this.controlCoordinates.initialPointerOffsetX=this.controlCoordinates.pointerOffsetX),Math.abs(this.controlCoordinates.targetOffsetY)===Math.abs(this.controlCoordinates.limitOffsetY)&&(this.controlCoordinates.initialOffsetY=this.controlCoordinates.targetOffsetY,this.controlCoordinates.initialPointerOffsetY=this.controlCoordinates.pointerOffsetY),this.setZoomData(this.controlCoordinates.initialScale,this.controlCoordinates.targetOffsetX,this.controlCoordinates.targetOffsetY),this.zoomPanElement(this.controlCoordinates.targetOffsetX+"px",this.controlCoordinates.targetOffsetY+"px",this.controlCoordinates.targetScale))}if(o.type==="mousemove"&&this.controlCoordinates.mousedown){if(o.type=="touchmove")return!0;if(o.preventDefault(),this.controlCoordinates.capture===!1)return!1;this.controlCoordinates.pointerOffsetX=o.clientX,this.controlCoordinates.pointerOffsetY=o.clientY,this.controlCoordinates.targetScale=this.controlCoordinates.initialScale,this.controlCoordinates.limitOffsetX=(this.controlCoordinates.imgWidth*this.controlCoordinates.targetScale-this.controlCoordinates.containerWidth)/2,this.controlCoordinates.limitOffsetY=(this.controlCoordinates.imgHeight*this.controlCoordinates.targetScale-this.controlCoordinates.containerHeight)/2,this.controlCoordinates.targetOffsetX=this.controlCoordinates.imgWidth*this.controlCoordinates.targetScale<=this.controlCoordinates.containerWidth?0:this.minMax(this.controlCoordinates.pointerOffsetX-(this.controlCoordinates.initialPointerOffsetX-this.controlCoordinates.initialOffsetX),this.controlCoordinates.limitOffsetX*-1,this.controlCoordinates.limitOffsetX),this.controlCoordinates.targetOffsetY=this.controlCoordinates.imgHeight*this.controlCoordinates.targetScale<=this.controlCoordinates.containerHeight?0:this.minMax(this.controlCoordinates.pointerOffsetY-(this.controlCoordinates.initialPointerOffsetY-this.controlCoordinates.initialOffsetY),this.controlCoordinates.limitOffsetY*-1,this.controlCoordinates.limitOffsetY),Math.abs(this.controlCoordinates.targetOffsetX)===Math.abs(this.controlCoordinates.limitOffsetX)&&(this.controlCoordinates.initialOffsetX=this.controlCoordinates.targetOffsetX,this.controlCoordinates.initialPointerOffsetX=this.controlCoordinates.pointerOffsetX),Math.abs(this.controlCoordinates.targetOffsetY)===Math.abs(this.controlCoordinates.limitOffsetY)&&(this.controlCoordinates.initialOffsetY=this.controlCoordinates.targetOffsetY,this.controlCoordinates.initialPointerOffsetY=this.controlCoordinates.pointerOffsetY),this.setZoomData(this.controlCoordinates.initialScale,this.controlCoordinates.targetOffsetX,this.controlCoordinates.targetOffsetY),this.zoomPanElement(this.controlCoordinates.targetOffsetX+"px",this.controlCoordinates.targetOffsetY+"px",this.controlCoordinates.targetScale)}this.controlCoordinates.zoomed||(this.controlCoordinates.swipeEnd=o.pageX||o.touches[0].pageX,this.controlCoordinates.swipeYEnd=o.pageY||o.touches[0].pageY,this.controlCoordinates.swipeDiff=this.controlCoordinates.swipeStart-this.controlCoordinates.swipeEnd,this.controlCoordinates.swipeYDiff=this.controlCoordinates.swipeYStart-this.controlCoordinates.swipeYEnd,this.options.animationSlide&&this.slide(0,-this.controlCoordinates.swipeDiff+"px"))}),this.addEventListener(this.domNodes.image,["touchend."+this.eventNamespace,"mouseup."+this.eventNamespace,"touchcancel."+this.eventNamespace,"mouseleave."+this.eventNamespace,"pointerup","pointercancel","MSPointerUp","MSPointerCancel"],o=>{if(this.isTouchDevice&&o.type==="touchend"&&(this.controlCoordinates.touchCount=o.touches.length,this.controlCoordinates.touchCount===0?(this.currentImage&&this.setZoomData(this.controlCoordinates.initialScale,this.controlCoordinates.targetOffsetX,this.controlCoordinates.targetOffsetY),this.controlCoordinates.initialScale===1&&(this.controlCoordinates.zoomed=!1,this.domNodes.caption.style.display==="none"&&this.fadeIn(this.domNodes.caption,this.options.fadeSpeed)),this.controlCoordinates.initialPinchDistance=null,this.controlCoordinates.capture=!1):this.controlCoordinates.touchCount===1?(this.controlCoordinates.initialPointerOffsetX=o.touches[0].clientX,this.controlCoordinates.initialPointerOffsetY=o.touches[0].clientY):this.controlCoordinates.touchCount>1&&(this.controlCoordinates.initialPinchDistance=null)),this.controlCoordinates.mousedown){this.controlCoordinates.mousedown=!1;let i=!0;this.options.loop||(this.currentImageIndex===0&&this.controlCoordinates.swipeDiff<0&&(i=!1),this.currentImageIndex>=this.relatedElements.length-1&&this.controlCoordinates.swipeDiff>0&&(i=!1)),Math.abs(this.controlCoordinates.swipeDiff)>this.options.swipeTolerance&&i?this.loadImage(this.controlCoordinates.swipeDiff>0?1:-1):this.options.animationSlide&&this.slide(this.options.animationSpeed/1e3,0+"px"),this.options.swipeClose&&Math.abs(this.controlCoordinates.swipeYDiff)>50&&Math.abs(this.controlCoordinates.swipeDiff)<this.options.swipeTolerance&&this.close()}}),this.addEventListener(this.domNodes.image,["dblclick"],o=>{if(!this.isTouchDevice)return this.controlCoordinates.initialPointerOffsetX=o.clientX,this.controlCoordinates.initialPointerOffsetY=o.clientY,this.controlCoordinates.containerHeight=this.getDimensions(this.domNodes.image).height,this.controlCoordinates.containerWidth=this.getDimensions(this.domNodes.image).width,this.controlCoordinates.imgHeight=this.getDimensions(this.currentImage).height,this.controlCoordinates.imgWidth=this.getDimensions(this.currentImage).width,this.controlCoordinates.containerOffsetX=this.domNodes.image.offsetLeft,this.controlCoordinates.containerOffsetY=this.domNodes.image.offsetTop,this.currentImage.classList.add("sl-transition"),this.controlCoordinates.zoomed?(this.controlCoordinates.initialScale=1,this.setZoomData(this.controlCoordinates.initialScale,0,0),this.zoomPanElement(0+"px",0+"px",this.controlCoordinates.initialScale),this.controlCoordinates.zoomed=!1,this.domNodes.caption.style.display==="none"&&this.fadeIn(this.domNodes.caption,this.options.fadeSpeed)):(this.controlCoordinates.initialScale=this.options.doubleTapZoom,this.setZoomData(this.controlCoordinates.initialScale,0,0),this.zoomPanElement(0+"px",0+"px",this.controlCoordinates.initialScale),(!this.domNodes.caption.style.opacity||this.domNodes.caption.style.opacity>0)&&this.domNodes.caption.style.display!=="none"&&this.fadeOut(this.domNodes.caption,this.options.fadeSpeed),this.controlCoordinates.zoomed=!0),setTimeout(()=>{this.currentImage&&(this.currentImage.classList.remove("sl-transition"),this.currentImage.style[this.transitionPrefix+"transform-origin"]=null)},200),this.controlCoordinates.capture=!0,!1})}getDimensions(o){let i=window.getComputedStyle(o),n=o.offsetHeight,m=o.offsetWidth,u=parseFloat(i.borderTopWidth),p=parseFloat(i.borderBottomWidth),C=parseFloat(i.paddingTop),g=parseFloat(i.paddingBottom),w=parseFloat(i.borderLeftWidth),x=parseFloat(i.borderRightWidth),T=parseFloat(i.paddingLeft),v=parseFloat(i.paddingRight);return{height:n-p-u-C-g,width:m-w-x-T-v}}updateHash(){let o="pid="+(this.currentImageIndex+1),i=window.location.href.split("#")[0]+"#"+o;this.hashReseted=!1,this.pushStateSupport?window.history[this.historyHasChanges?"replaceState":"pushState"]("",document.title,i):this.historyHasChanges?window.location.replace(i):window.location.hash=o,this.historyHasChanges||(this.urlChangedOnce=!0),this.historyHasChanges=!0}resetHash(){this.hashReseted=!0,this.urlChangedOnce?history.back():this.pushStateSupport?history.pushState("",document.title,window.location.pathname+window.location.search):window.location.hash="",clearTimeout(this.historyUpdateTimeout)}updateURL(){clearTimeout(this.historyUpdateTimeout),this.historyHasChanges?this.historyUpdateTimeout=setTimeout(this.updateHash.bind(this),800):this.updateHash()}setCaption(o,i,n){if(this.options.captions&&o&&o!==""&&typeof o<"u"){const m=n??this.options.captionHTML??!0?"innerHTML":"innerText";this.hide(this.domNodes.caption),this.domNodes.caption.style.width=i+"px",this.domNodes.caption[m]=o,this.domNodes.image.appendChild(this.domNodes.caption),setTimeout(()=>{this.fadeIn(this.domNodes.caption,this.options.fadeSpeed)},this.options.captionDelay)}}slide(o,i){if(!this.transitionCapable)return this.domNodes.image.style.left=i;this.domNodes.image.style[this.transitionPrefix+"transform"]="translateX("+i+")",this.domNodes.image.style[this.transitionPrefix+"transition"]=this.transitionPrefix+"transform "+o+"s linear"}getRelated(o){let i;return o&&o!==!1&&o!=="nofollow"?i=Array.from(this.elements).filter(n=>n.getAttribute("rel")===o):i=this.elements,i}openImage(o){o.dispatchEvent(new Event("show."+this.eventNamespace)),this.globalScrollbarWidth=this.getScrollbarWidth(),this.options.disableScroll&&(this.toggleScrollbar("hide"),this.globalScrollbarWidth=0),this.options.htmlClass&&this.options.htmlClass!==""&&document.querySelector("html").classList.add(this.options.htmlClass),document.body.appendChild(this.domNodes.wrapper),this.domNodes.wrapper.appendChild(this.domNodes.image),this.options.overlay&&document.body.appendChild(this.domNodes.overlay),this.relatedElements=this.getRelated(o.rel),this.options.showCounter&&(this.relatedElements.length==1&&this.domNodes.wrapper.contains(this.domNodes.counter)?this.domNodes.wrapper.removeChild(this.domNodes.counter):this.relatedElements.length>1&&!this.domNodes.wrapper.contains(this.domNodes.counter)&&this.domNodes.wrapper.appendChild(this.domNodes.counter)),this.options.download&&this.domNodes.download&&this.domNodes.wrapper.appendChild(this.domNodes.download),this.isAnimating=!0,this.currentImageIndex=this.relatedElements.indexOf(o);let i=o.getAttribute(this.options.sourceAttr);this.currentImage=document.createElement("img"),this.currentImage.style.display="none",this.currentImage.setAttribute("src",i),this.currentImage.dataset.scale=1,this.currentImage.dataset.translateX=0,this.currentImage.dataset.translateY=0,this.loadedImages.indexOf(i)===-1&&this.loadedImages.push(i),this.domNodes.image.innerHTML="",this.domNodes.image.setAttribute("style",""),this.domNodes.image.appendChild(this.currentImage),this.fadeIn(this.domNodes.overlay,this.options.fadeSpeed),this.fadeIn([this.domNodes.counter,this.domNodes.navigation,this.domNodes.closeButton,this.domNodes.download],this.options.fadeSpeed),this.show(this.domNodes.spinner),this.domNodes.counter.querySelector(".sl-current").innerHTML=this.currentImageIndex+1,this.domNodes.counter.querySelector(".sl-total").innerHTML=this.relatedElements.length,this.adjustImage(),this.options.preloading&&this.preload(),setTimeout(()=>{o.dispatchEvent(new Event("shown."+this.eventNamespace))},this.options.animationSpeed)}forceFocus(){this.removeEventListener(document,"focusin."+this.eventNamespace),this.addEventListener(document,"focusin."+this.eventNamespace,o=>{document!==o.target&&this.domNodes.wrapper!==o.target&&!this.domNodes.wrapper.contains(o.target)&&this.domNodes.wrapper.focus()})}addEventListener(o,i,n,m){o=this.wrap(o),i=this.wrap(i);for(let u of o){u.namespaces||(u.namespaces={});for(let p of i){let C=m||!1;["touchstart","touchmove","mousewheel","DOMMouseScroll"].indexOf(p.split(".")[0])>=0&&this.isPassiveEventsSupported&&(typeof C=="object"?C.passive=!0:C={passive:!0}),u.namespaces[p]=n,u.addEventListener(p.split(".")[0],n,C)}}}removeEventListener(o,i){o=this.wrap(o),i=this.wrap(i);for(let n of o)for(let m of i)n.namespaces&&n.namespaces[m]&&(n.removeEventListener(m.split(".")[0],n.namespaces[m]),delete n.namespaces[m])}fadeOut(o,i,n){o=this.wrap(o);for(let p of o)p.style.opacity=parseFloat(p)||window.getComputedStyle(p).getPropertyValue("opacity");this.isFadeIn=!1;let m=16.66666/(i||this.options.fadeSpeed),u=()=>{let p=parseFloat(o[0].style.opacity);if((p-=m)<0){for(let C of o)C.style.display="none",C.style.opacity=1;n&&n.call(this,o)}else{for(let C of o)C.style.opacity=p;requestAnimationFrame(u)}};u()}fadeIn(o,i,n,m){o=this.wrap(o);for(let g of o)g&&(g.style.opacity=0,g.style.display=m||"block");this.isFadeIn=!0;let u=parseFloat(o[0].dataset.opacityTarget||1),p=16.66666*u/(i||this.options.fadeSpeed),C=()=>{let g=parseFloat(o[0].style.opacity);if((g+=p)>u){for(let w of o)w&&(w.style.opacity=u);n&&n.call(this,o)}else{for(let w of o)w&&(w.style.opacity=g);if(!this.isFadeIn)return;requestAnimationFrame(C)}};C()}hide(o){o=this.wrap(o);for(let i of o)i.style.display!="none"&&(i.dataset.initialDisplay=i.style.display),i.style.display="none"}show(o,i){o=this.wrap(o);for(let n of o)n.style.display=n.dataset.initialDisplay||i||"block"}wrap(o){return typeof o[Symbol.iterator]=="function"&&typeof o!="string"?o:[o]}on(o,i){o=this.wrap(o);for(let n of this.elements){n.fullyNamespacedEvents||(n.fullyNamespacedEvents={});for(let m of o)n.fullyNamespacedEvents[m]=i,n.addEventListener(m,i)}return this}off(o){o=this.wrap(o);for(let i of this.elements)for(let n of o)typeof i.fullyNamespacedEvents<"u"&&n in i.fullyNamespacedEvents&&i.removeEventListener(n,i.fullyNamespacedEvents[n]);return this}open(o,i=0){o=o||this.elements[0],typeof jQuery<"u"&&o instanceof jQuery&&(o=o.get(0)),i>0&&(o=this.elements[i]),this.initialImageIndex=this.elements.indexOf(o),this.initialImageIndex>-1&&this.openImage(o)}openPosition(o){let i=this.elements[o];this.open(i,o)}next(){this.loadImage(1)}prev(){this.loadImage(-1)}getLighboxData(){return{currentImageIndex:this.currentImageIndex,currentImage:this.currentImage,globalScrollbarWidth:this.globalScrollbarWidth}}destroy(){this.off(["close."+this.eventNamespace,"closed."+this.eventNamespace,"nextImageLoaded."+this.eventNamespace,"prevImageLoaded."+this.eventNamespace,"change."+this.eventNamespace,"nextDone."+this.eventNamespace,"prevDone."+this.eventNamespace,"error."+this.eventNamespace,"changed."+this.eventNamespace,"next."+this.eventNamespace,"prev."+this.eventNamespace,"show."+this.eventNamespace,"shown."+this.eventNamespace]),this.removeEventListener(this.elements,"click."+this.eventNamespace),this.removeEventListener(document,"focusin."+this.eventNamespace),this.removeEventListener(document.body,"contextmenu."+this.eventNamespace),this.removeEventListener(document.body,"keyup."+this.eventNamespace),this.removeEventListener(this.domNodes.navigation.getElementsByTagName("button"),"click."+this.eventNamespace),this.removeEventListener(this.domNodes.closeButton,"click."+this.eventNamespace),this.removeEventListener(window,"resize."+this.eventNamespace),this.removeEventListener(window,"hashchange."+this.eventNamespace),this.close(),this.isOpen&&(document.body.removeChild(this.domNodes.wrapper),document.body.removeChild(this.domNodes.overlay)),this.elements=null}refresh(){if(!this.initialSelector)throw"refreshing only works when you initialize using a selector!";let o=this.options,i=this.initialSelector;return this.destroy(),this.constructor(i,o),this}}global.SimpleLightbox=Z;export{B as S};
//# sourceMappingURL=vendor-a9c87935.js.map
